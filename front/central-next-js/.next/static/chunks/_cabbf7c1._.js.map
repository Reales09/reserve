{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/cam/Desktop/reserve/front/central-next-js/src/shared/hooks/useModuleNavigation.ts"],"sourcesContent":["import { useCallback, useRef } from 'react';\nimport { useRouter } from 'next/navigation';\n\ninterface ModuleCache {\n  [key: string]: {\n    timestamp: number;\n    data: any;\n  };\n}\n\nexport const useModuleNavigation = () => {\n  const router = useRouter();\n  const moduleCache = useRef<ModuleCache>({});\n  const navigationTimeout = useRef<NodeJS.Timeout | null>(null);\n\n  // Navegar a un m√≥dulo con cache inteligente\n  const navigateToModule = useCallback((path: string, forceReload = false) => {\n    // Cancelar navegaci√≥n anterior si existe\n    if (navigationTimeout.current) {\n      clearTimeout(navigationTimeout.current);\n    }\n\n    // Si no es recarga forzada y tenemos cache v√°lido, usar cache\n    if (!forceReload && moduleCache.current[path]) {\n      const cache = moduleCache.current[path];\n      const now = Date.now();\n      const cacheAge = now - cache.timestamp;\n      \n      // Cache v√°lido por 5 minutos\n      if (cacheAge < 5 * 60 * 1000) {\n        console.log(`üöÄ useModuleNavigation: Usando cache para ${path} (edad: ${Math.round(cacheAge / 1000)}s)`);\n        router.push(path);\n        return;\n      }\n    }\n\n    // Navegar con delay m√≠nimo para evitar parpadeos\n    navigationTimeout.current = setTimeout(() => {\n      console.log(`üöÄ useModuleNavigation: Navegando a ${path}`);\n      router.push(path);\n    }, 50);\n  }, [router]);\n\n  // Pre-cargar m√≥dulo en background\n  const preloadModule = useCallback((path: string) => {\n    if (moduleCache.current[path]) return;\n    \n    console.log(`üîÑ useModuleNavigation: Pre-cargando m√≥dulo ${path}`);\n    // Aqu√≠ podr√≠as implementar pre-carga de datos del m√≥dulo\n    moduleCache.current[path] = {\n      timestamp: Date.now(),\n      data: null\n    };\n  }, []);\n\n  // Limpiar cache de m√≥dulo\n  const clearModuleCache = useCallback((path?: string) => {\n    if (path) {\n      delete moduleCache.current[path];\n      console.log(`üßπ useModuleNavigation: Cache limpiado para ${path}`);\n    } else {\n      moduleCache.current = {};\n      console.log(`üßπ useModuleNavigation: Cache completo limpiado`);\n    }\n  }, []);\n\n  // Obtener estad√≠sticas del cache\n  const getCacheStats = useCallback(() => {\n    const now = Date.now();\n    const stats = {\n      totalModules: Object.keys(moduleCache.current).length,\n      modules: Object.entries(moduleCache.current).map(([path, cache]) => ({\n        path,\n        age: Math.round((now - cache.timestamp) / 1000),\n        valid: (now - cache.timestamp) < 5 * 60 * 1000\n      }))\n    };\n    \n    console.log('üìä useModuleNavigation: Estad√≠sticas del cache:', stats);\n    return stats;\n  }, []);\n\n  return {\n    navigateToModule,\n    preloadModule,\n    clearModuleCache,\n    getCacheStats\n  };\n}; "],"names":[],"mappings":";;;AAAA;AACA;;;;AASO,MAAM,sBAAsB;;IACjC,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,cAAc,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAe,CAAC;IACzC,MAAM,oBAAoB,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAyB;IAExD,4CAA4C;IAC5C,MAAM,mBAAmB,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;6DAAE,SAAC;gBAAc,+EAAc;YAChE,yCAAyC;YACzC,IAAI,kBAAkB,OAAO,EAAE;gBAC7B,aAAa,kBAAkB,OAAO;YACxC;YAEA,8DAA8D;YAC9D,IAAI,CAAC,eAAe,YAAY,OAAO,CAAC,KAAK,EAAE;gBAC7C,MAAM,QAAQ,YAAY,OAAO,CAAC,KAAK;gBACvC,MAAM,MAAM,KAAK,GAAG;gBACpB,MAAM,WAAW,MAAM,MAAM,SAAS;gBAEtC,6BAA6B;gBAC7B,IAAI,WAAW,IAAI,KAAK,MAAM;oBAC5B,QAAQ,GAAG,CAAC,AAAC,6CAA2D,OAAf,MAAK,YAAsC,OAA5B,KAAK,KAAK,CAAC,WAAW,OAAM;oBACpG,OAAO,IAAI,CAAC;oBACZ;gBACF;YACF;YAEA,iDAAiD;YACjD,kBAAkB,OAAO,GAAG;qEAAW;oBACrC,QAAQ,GAAG,CAAC,AAAC,uCAA2C,OAAL;oBACnD,OAAO,IAAI,CAAC;gBACd;oEAAG;QACL;4DAAG;QAAC;KAAO;IAEX,kCAAkC;IAClC,MAAM,gBAAgB,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;0DAAE,CAAC;YACjC,IAAI,YAAY,OAAO,CAAC,KAAK,EAAE;YAE/B,QAAQ,GAAG,CAAC,AAAC,+CAAmD,OAAL;YAC3D,yDAAyD;YACzD,YAAY,OAAO,CAAC,KAAK,GAAG;gBAC1B,WAAW,KAAK,GAAG;gBACnB,MAAM;YACR;QACF;yDAAG,EAAE;IAEL,0BAA0B;IAC1B,MAAM,mBAAmB,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;6DAAE,CAAC;YACpC,IAAI,MAAM;gBACR,OAAO,YAAY,OAAO,CAAC,KAAK;gBAChC,QAAQ,GAAG,CAAC,AAAC,+CAAmD,OAAL;YAC7D,OAAO;gBACL,YAAY,OAAO,GAAG,CAAC;gBACvB,QAAQ,GAAG,CAAE;YACf;QACF;4DAAG,EAAE;IAEL,iCAAiC;IACjC,MAAM,gBAAgB,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;0DAAE;YAChC,MAAM,MAAM,KAAK,GAAG;YACpB,MAAM,QAAQ;gBACZ,cAAc,OAAO,IAAI,CAAC,YAAY,OAAO,EAAE,MAAM;gBACrD,SAAS,OAAO,OAAO,CAAC,YAAY,OAAO,EAAE,GAAG;sEAAC;4BAAC,CAAC,MAAM,MAAM;+BAAM;4BACnE;4BACA,KAAK,KAAK,KAAK,CAAC,CAAC,MAAM,MAAM,SAAS,IAAI;4BAC1C,OAAO,AAAC,MAAM,MAAM,SAAS,GAAI,IAAI,KAAK;wBAC5C;;;YACF;YAEA,QAAQ,GAAG,CAAC,mDAAmD;YAC/D,OAAO;QACT;yDAAG,EAAE;IAEL,OAAO;QACL;QACA;QACA;QACA;IACF;AACF;GA9Ea;;QACI,qIAAA,CAAA,YAAS","debugId":null}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///home/cam/Desktop/reserve/front/central-next-js/src/services/users/ui/components/UserProfileModal.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { User } from '@/services/users/domain/entities/User';\nimport './UserProfileModal.css';\n\ninterface UserProfileModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  userInfo: User | null;\n}\n\nconst ensureMediaUrl = (url?: string): string => {\n  if (!url) return '';\n  if (url.startsWith('http')) return url;\n  return `https://media.xn--rup-joa.com/${url.replace(/^\\//, '')}`;\n};\n\nconst UserProfileModal: React.FC<UserProfileModalProps> = ({ isOpen, onClose, userInfo }) => {\n  if (!isOpen) return null;\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('es-ES', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  const primaryBusiness = userInfo?.businesses && userInfo.businesses.length > 0 ? userInfo.businesses[0] : undefined;\n  const businessLogo = ensureMediaUrl(primaryBusiness?.logoURL);\n  const mainRole = userInfo?.roles && userInfo.roles.length > 0 ? userInfo.roles[0] : undefined;\n\n  return (\n    <div className=\"modal-overlay\" onClick={onClose}>\n      <div className=\"modal-container\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <h2>üë§ Perfil de Usuario</h2>\n          <button className=\"close-btn\" onClick={onClose}>‚úï</button>\n        </div>\n        <div className=\"modal-content\">\n          {/* Tarjeta transl√∫cida (vapor) para datos del usuario */}\n          <div className=\"user-card\">\n            <div className=\"user-profile-info\">\n              <div className=\"profile-avatar\">\n                {userInfo?.avatarURL ? (\n                  <img src={userInfo.avatarURL} alt={userInfo.name} />\n                ) : (\n                  <span className=\"avatar-placeholder\">\n                    {userInfo?.name?.charAt(0)?.toUpperCase() || 'U'}\n                  </span>\n                )}\n              </div>\n              <div className=\"profile-details\">\n                <h3>\n                  {userInfo?.name || 'Usuario'}\n                  {mainRole && <span className=\"role-chip\">{mainRole.name}</span>}\n                </h3>\n                <p className=\"user-email\">{userInfo?.email || 'usuario@ejemplo.com'}</p>\n                <p className=\"user-phone\">Tel√©fono: {userInfo?.phone || 'No especificado'}</p>\n                <div className=\"user-status\">\n                  <span className={`status-badge ${userInfo?.isActive ? 'active' : 'inactive'}`}>\n                    {userInfo?.isActive ? 'Activo' : 'Inactivo'}\n                  </span>\n                </div>\n                {/* Roles dentro de la tarjeta del usuario */}\n                <div className=\"user-card-roles\">\n                  <div className=\"tags-container\">\n                    {userInfo?.roles && userInfo.roles.length > 0 ? (\n                      userInfo.roles.map((role) => (\n                        <span key={role.id} className=\"tag role-tag\">\n                          {role.name}\n                        </span>\n                      ))\n                    ) : (\n                      <p className=\"no-data\">No tiene roles asignados</p>\n                    )}\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Tarjeta del negocio con logo e informaci√≥n */}\n          {primaryBusiness && (\n            <div className=\"business-card\">\n              <div className=\"business-card-header\">\n                <div className=\"business-logo-wrap\">\n                  {businessLogo ? (\n                    <img src={businessLogo} alt={primaryBusiness.name} />\n                  ) : (\n                    <span className=\"business-logo-placeholder\">\n                      {primaryBusiness.name.charAt(0).toUpperCase()}\n                    </span>\n                  )}\n                </div>\n                <div className=\"business-title\">\n                  <h4>{primaryBusiness.name}</h4>\n                  <span className=\"business-code\">{primaryBusiness.code}</span>\n                </div>\n              </div>\n              <div className=\"business-body\">\n                {primaryBusiness.description && (\n                  <p className=\"business-desc\">{primaryBusiness.description}</p>\n                )}\n                <div className=\"business-meta\">\n                  {primaryBusiness.businessTypeName && (\n                    <span className=\"badge\">{primaryBusiness.businessTypeName}</span>\n                  )}\n                  {primaryBusiness.timezone && (\n                    <span className=\"badge subtle\">{primaryBusiness.timezone}</span>\n                  )}\n                  {primaryBusiness.address && (\n                    <span className=\"badge subtle\">{primaryBusiness.address}</span>\n                  )}\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Negocios como tags (adem√°s de la tarjeta principal) */}\n          <div className=\"user-businesses-section\">\n            <h4>Negocios</h4>\n            <div className=\"tags-container\">\n              {userInfo?.businesses && userInfo.businesses.length > 0 ? (\n                userInfo.businesses.map((business) => (\n                  <span key={business.id} className=\"tag business-tag\">\n                    {business.name}\n                  </span>\n                ))\n              ) : (\n                <p className=\"no-data\">No tiene negocios asignados</p>\n              )}\n            </div>\n          </div>\n\n          {/* Fechas */}\n          <div className=\"user-timestamps\">\n            <div className=\"timestamp-item\">\n              <span className=\"timestamp-label\">Creado:</span>\n              <span className=\"timestamp-value\">\n                {userInfo?.createdAt ? formatDate(userInfo.createdAt) : 'N/A'}\n              </span>\n            </div>\n            <div className=\"timestamp-item\">\n              <span className=\"timestamp-label\">Actualizado:</span>\n              <span className=\"timestamp-value\">\n                {userInfo?.updatedAt ? formatDate(userInfo.updatedAt) : 'N/A'}\n              </span>\n            </div>\n            {userInfo?.lastLoginAt && (\n              <div className=\"timestamp-item\">\n                <span className=\"timestamp-label\">√öltimo acceso:</span>\n                <span className=\"timestamp-value\">\n                  {formatDate(userInfo.lastLoginAt)}\n                </span>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default UserProfileModal; "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 574, "column": 0}, "map": {"version":3,"sources":["file:///home/cam/Desktop/reserve/front/central-next-js/src/shared/ui/components/Sidebar.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useMemo, useEffect } from 'react';\nimport { useRouter, usePathname } from 'next/navigation';\nimport { useAppContext } from '@/shared/contexts/AppContext';\nimport { useModuleNavigation } from '@/shared/hooks/useModuleNavigation';\nimport UserProfileModal from '@/services/users/ui/components/UserProfileModal';\nimport './Sidebar.css';\n\n// Interfaces para tipado\ninterface MenuItem {\n  id: string;\n  icon: string;\n  label: string;\n  path: string;\n}\n\ninterface UserRole {\n  code?: string;\n  name?: string;\n}\n\ninterface SidebarPermissions {\n  isSuper: boolean;\n  hasUsersManage: boolean;\n  hasUsersCreate: boolean;\n  hasUsersUpdate: boolean;\n  hasUsersDelete: boolean;\n  hasManageUsers: boolean;\n  hasBusinessesManage: boolean;\n  hasTablesManage: boolean;\n  hasRoomsManage: boolean;\n  hasRoleSuperAdmin: boolean;\n  hasRoleAdmin: boolean;\n  hasRoleManager: boolean;\n}\n\ninterface MenuItemsResult {\n  items: MenuItem[];\n  canManageUsers: boolean;\n  canManageBusinesses: boolean;\n  canManageTables: boolean;\n  canManageRooms: boolean;\n}\n\nexport default function Sidebar() {\n    const { user, hasPermission, isSuperAdmin } = useAppContext();\n    const { navigateToModule, preloadModule } = useModuleNavigation();\n    const [showProfileModal, setShowProfileModal] = useState(false);\n    const router = useRouter();\n    const pathname = usePathname();\n\n    // Memoizar permisos para evitar rec√°lculos en cada render\n    const permissions: SidebarPermissions = useMemo(() => {\n        const isSuper = isSuperAdmin();\n\n        // Verificar permisos espec√≠ficos\n        const hasUsersManage = hasPermission('users:manage');\n        const hasUsersCreate = hasPermission('users:create');\n        const hasUsersUpdate = hasPermission('users:update');\n        const hasUsersDelete = hasPermission('users:delete');\n        const hasManageUsers = hasPermission('manage_users');\n        const hasBusinessesManage = hasPermission('businesses:manage');\n        const hasTablesManage = hasPermission('tables:manage');\n        const hasRoomsManage = hasPermission('rooms:manage');\n\n        // Verificar roles reales del usuario (no como permisos)\n        const roleCodes = (user?.roles || []).map((r: UserRole) => r.code || r.name || '').map((c: string) => c.toLowerCase());\n        const hasRoleSuperAdmin = roleCodes.includes('super_admin') || roleCodes.includes('platform');\n        const hasRoleAdmin = roleCodes.includes('admin');\n        const hasRoleManager = roleCodes.includes('manager');\n\n        return {\n            isSuper,\n            hasUsersManage,\n            hasUsersCreate,\n            hasUsersUpdate,\n            hasUsersDelete,\n            hasManageUsers,\n            hasBusinessesManage,\n            hasTablesManage,\n            hasRoomsManage,\n            hasRoleSuperAdmin,\n            hasRoleAdmin,\n            hasRoleManager\n        };\n    }, [isSuperAdmin, hasPermission, user]);\n\n    // Memoizar men√∫ para evitar recreaciones\n    const menuItems: MenuItemsResult = useMemo(() => {\n        const items: MenuItem[] = [\n            {\n                id: 'calendario',\n                icon: '‚ñ¶',\n                label: 'Calendario',\n                path: '/calendar'\n            },\n            {\n                id: 'reservas',\n                icon: '‚â°',\n                label: 'Reservas',\n                path: '/reservas'\n            }\n        ];\n\n        // Verificar m√∫ltiples permisos relacionados con usuarios\n        const canManageUsers = permissions.isSuper ||\n            permissions.hasManageUsers ||\n            permissions.hasUsersManage ||\n            permissions.hasUsersCreate ||\n            permissions.hasUsersUpdate ||\n            permissions.hasUsersDelete ||\n            permissions.hasRoleSuperAdmin ||\n            permissions.hasRoleAdmin ||\n            permissions.hasRoleManager;\n\n        // Verificar permisos para negocios\n        const canManageBusinesses = permissions.isSuper || \n            permissions.hasBusinessesManage ||\n            permissions.hasRoleSuperAdmin ||\n            permissions.hasRoleAdmin;\n\n        // Verificar permisos para mesas\n        const canManageTables = permissions.isSuper || \n            permissions.hasTablesManage ||\n            permissions.hasRoleSuperAdmin ||\n            permissions.hasRoleAdmin ||\n            permissions.hasRoleManager;\n\n        // Verificar permisos para salas\n        const canManageRooms = permissions.isSuper || \n            permissions.hasRoomsManage ||\n            permissions.hasRoleSuperAdmin ||\n            permissions.hasRoleAdmin ||\n            permissions.hasRoleManager;\n\n        if (canManageUsers) {\n            items.push({\n                id: 'admin-users',\n                icon: '‚ñ§',\n                label: 'Administrar Usuarios',\n                path: '/users'\n            });\n        }\n\n        if (canManageBusinesses) {\n            items.push({\n                id: 'admin-businesses',\n                icon: 'üè™',\n                label: 'Administrar Negocios',\n                path: '/admin-businesses'\n            });\n        }\n\n        if (canManageTables) {\n            items.push({\n                id: 'admin-tables',\n                icon: 'ü™ë',\n                label: 'Administrar Mesas',\n                path: '/admin-tables'\n            });\n        }\n\n        if (canManageRooms) {\n            items.push({\n                id: 'admin-rooms',\n                icon: 'üè†',\n                label: 'Administrar Salas',\n                path: '/admin-rooms'\n            });\n        }\n\n        return { items, canManageUsers, canManageBusinesses, canManageTables, canManageRooms };\n    }, [permissions]);\n\n    // Debug: Verificar qu√© permisos se est√°n detectando\n    useEffect(() => {\n        console.log('üîç Sidebar Debug - Permisos detectados:', permissions);\n        console.log('üîç Sidebar Debug - canManageUsers:', menuItems.canManageUsers);\n        console.log('üîç Sidebar Debug - canManageBusinesses:', menuItems.canManageBusinesses);\n        console.log('üîç Sidebar Debug - canManageTables:', menuItems.canManageTables);\n        console.log('üîç Sidebar Debug - canManageRooms:', menuItems.canManageRooms);\n        console.log('üîç Sidebar Debug - MenuItems finales:', menuItems.items.map((item: MenuItem) => item.label));\n    }, [permissions, menuItems]);\n\n    // Pre-cargar m√≥dulos en background cuando se monta el componente\n    useEffect(() => {\n        menuItems.items.forEach((item: MenuItem) => {\n            if (item.path !== pathname) {\n                preloadModule(item.path);\n            }\n        });\n    }, [menuItems.items, pathname, preloadModule]);\n\n    // Memoizar handlers para evitar recreaciones\n    const handleAvatarClick = useMemo(() => () => {\n        setShowProfileModal(true);\n    }, []);\n\n    const closeProfileModal = useMemo(() => () => {\n        setShowProfileModal(false);\n    }, []);\n\n    const handleLogout = useMemo(() => () => {\n        // Limpiar contexto y redirigir\n        router.push('/auth/login');\n    }, [router]);\n\n    const handleNavigation = useMemo(() => (path: string) => {\n        navigateToModule(path);\n    }, [navigateToModule]);\n\n    // Determinar la vista activa basada en la ruta actual\n    const activeView = useMemo(() => {\n        const currentPath = pathname;\n        const menuItem = menuItems.items.find((item: MenuItem) => item.path === currentPath);\n        return menuItem ? menuItem.id : 'calendario';\n    }, [pathname, menuItems.items]);\n\n    return (\n        // @ts-ignore - JSX IntrinsicElements issue in Next.js 15\n        <div className=\"sidebar\">\n            {/* Header con informaci√≥n del usuario */}\n            {/* @ts-ignore - JSX IntrinsicElements issue in Next.js 15 */}\n            <div className=\"sidebar-header\">\n                {/* @ts-ignore - JSX IntrinsicElements issue in Next.js 15 */}\n                <div className=\"sidebar-logo\">\n                    {/* @ts-ignore - JSX IntrinsicElements issue in Next.js 15 */}\n                    <img src=\"/app/rupu-icon.png\" alt=\"Rup√º\" width={36} height={36} className=\"logo-icon\" />\n                </div>\n                <div className=\"user-info\">\n                    <div\n                        className=\"user-avatar clickable-avatar\"\n                        onClick={handleAvatarClick}\n                        title=\"Ver perfil y permisos\"\n                    >\n                        {user?.avatarURL ? (\n                            <img src={user.avatarURL} alt=\"Avatar\" />\n                        ) : (\n                            <span className=\"user-avatar-placeholder\">\n                                {user?.name?.charAt(0)?.toUpperCase() || 'U'}\n                            </span>\n                        )}\n                    </div>\n                    <div className=\"user-details\">\n                        <div className=\"user-name\">{user?.name || 'Usuario'}</div>\n                        <div className=\"user-email\">{user?.email || 'usuario@ejemplo.com'}</div>\n                    </div>\n                </div>\n                <button\n                    className=\"logout-button\"\n                    onClick={handleLogout}\n                    title=\"Cerrar sesi√≥n\"\n                >\n                    <span className=\"logout-icon\">üö™</span>\n                    <span className=\"logout-label\">Salir</span>\n                </button>\n            </div>\n\n            <nav className=\"sidebar-nav\">\n                <ul className=\"nav-list\">\n                    {menuItems.items.map((item) => (\n                        <li\n                            key={item.id}\n                            className=\"nav-item\"\n                            data-tooltip={item.label}\n                        >\n                            <button\n                                className={`nav-button ${activeView === item.id ? 'active' : ''}`}\n                                onClick={() => handleNavigation(item.path)}\n                                title={item.label}\n                            >\n                                <span className=\"nav-icon\">{item.icon}</span>\n                                <span className=\"nav-label\">{item.label}</span>\n                            </button>\n                        </li>\n                    ))}\n                </ul>\n            </nav>\n\n            {/* Modal de perfil de usuario */}\n            <UserProfileModal\n                isOpen={showProfileModal}\n                onClose={closeProfileModal}\n                userInfo={user}\n            />\n        </div>\n    );\n}; "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 990, "column": 0}, "map": {"version":3,"sources":["file:///home/cam/Desktop/reserve/front/central-next-js/src/shared/ui/components/Layout.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport Sidebar from './Sidebar';\nimport './Layout.css';\n\ninterface LayoutProps {\n  children: React.ReactNode;\n}\n\nconst Layout: React.FC<LayoutProps> = ({ children }) => {\n  return (\n    <div className=\"layout\">\n      <Sidebar />\n      <main className=\"main-content\">\n        <div className=\"content-wrapper\">\n          {children}\n        </div>\n      </main>\n    </div>\n  );\n};\n\nexport default Layout; "],"names":[],"mappings":";;;;AAGA;AAHA;;;;AAUA,MAAM,SAAgC;QAAC,EAAE,QAAQ,EAAE;IACjD,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,gJAAA,CAAA,UAAO;;;;;0BACR,6LAAC;gBAAK,WAAU;0BACd,cAAA,6LAAC;oBAAI,WAAU;8BACZ;;;;;;;;;;;;;;;;;AAKX;KAXM;uCAaS","debugId":null}},
    {"offset": {"line": 1044, "column": 0}, "map": {"version":3,"sources":["file:///home/cam/Desktop/reserve/front/central-next-js/src/app/%28app%29/layout.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAppContext } from '@/shared/contexts/AppContext';\nimport Layout from '@/shared/ui/components/Layout';\n\nexport default function AppLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const { user, isLoading, isInitialized } = useAppContext();\n  const router = useRouter();\n\n  useEffect(() => {\n    if (isInitialized && !isLoading && !user) {\n      router.push('/auth/login');\n    }\n  }, [user, isLoading, isInitialized, router]);\n\n  if (isLoading || !isInitialized) {\n    return (\n      <div className=\"flex min-h-screen items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500\"></div>\n          <p className=\"mt-4 text-gray-600\">Cargando aplicaci√≥n...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return null;\n  }\n\n  return (\n    <Layout>\n      {children}\n    </Layout>\n  );\n} "],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAOe,SAAS,UAAU,KAIjC;QAJiC,EAChC,QAAQ,EAGT,GAJiC;;IAKhC,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,aAAa,EAAE,GAAG,CAAA,GAAA,2IAAA,CAAA,gBAAa,AAAD;IACvD,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;+BAAE;YACR,IAAI,iBAAiB,CAAC,aAAa,CAAC,MAAM;gBACxC,OAAO,IAAI,CAAC;YACd;QACF;8BAAG;QAAC;QAAM;QAAW;QAAe;KAAO;IAE3C,IAAI,aAAa,CAAC,eAAe;QAC/B,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;;;;;kCACf,6LAAC;wBAAE,WAAU;kCAAqB;;;;;;;;;;;;;;;;;IAI1C;IAEA,IAAI,CAAC,MAAM;QACT,OAAO;IACT;IAEA,qBACE,6LAAC,+IAAA,CAAA,UAAM;kBACJ;;;;;;AAGP;GAlCwB;;QAKqB,2IAAA,CAAA,gBAAa;QACzC,qIAAA,CAAA,YAAS;;;KANF","debugId":null}},
    {"offset": {"line": 1137, "column": 0}, "map": {"version":3,"sources":["file:///home/cam/Desktop/reserve/front/central-next-js/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}