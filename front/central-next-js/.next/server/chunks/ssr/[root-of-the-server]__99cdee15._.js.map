{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///home/cam/Desktop/reserve/front/central-next-js/src/server/config/env.ts"],"sourcesContent":["export const serverConfig = {\n\n  API_BASE_URL: process.env.API_BASE_URL || \n  (process.env.NODE_ENV === 'production' ? 'http://central_reserve:3050' : 'http://localhost:3050'),\n  \n  NODE_ENV: process.env.NODE_ENV || 'development',\n  LOGIN_REDIRECT_URL: process.env.LOGIN_REDIRECT_URL || '/calendar',\n  LOGOUT_REDIRECT_URL: process.env.LOGOUT_REDIRECT_URL || '/auth/login',\n};\n\n\nexport function getApiBaseUrl(): string {\n  if (typeof window === 'undefined' && process.env.NODE_ENV === 'development') {\n    return 'http://localhost:3050';\n  }\n  \n  return serverConfig.API_BASE_URL;\n}\n\nexport function isLocalDevelopment(): boolean {\n  return process.env.NODE_ENV === 'development' && \n         !process.env.DOCKER_ENV && \n         typeof window === 'undefined';\n} "],"names":[],"mappings":";;;;;AAAO,MAAM,eAAe;IAE1B,cAAc,QAAQ,GAAG,CAAC,YAAY,IACtC,CAAC,sCAAwC,0BAAgC,uBAAuB;IAEhG,UAAU,mDAAwB;IAClC,oBAAoB,QAAQ,GAAG,CAAC,kBAAkB,IAAI;IACtD,qBAAqB,QAAQ,GAAG,CAAC,mBAAmB,IAAI;AAC1D;AAGO,SAAS;IACd,wCAA6E;QAC3E,OAAO;IACT;;;AAGF;AAEO,SAAS;IACd,OAAO,oDAAyB,iBACzB,CAAC,QAAQ,GAAG,CAAC,UAAU,IACvB,gBAAkB;AAC3B","debugId":null}},
    {"offset": {"line": 30, "column": 0}, "map": {"version":3,"sources":["file:///home/cam/Desktop/reserve/front/central-next-js/src/services/auth/infrastructure/actions/mappers/login-response.mapper.ts"],"sourcesContent":["/**\n * Mapper para la respuesta del login\n * Convierte del backend (snake_case) al dominio (camelCase)\n * \n * RESUELVE EL PROBLEMA REAL:\n * - avatar_url → avatarURL\n * - is_active → isActive\n * - logo_url → logoURL\n */\n\nimport type { LoginData } from '../response/login';\nimport type { LoginData as DomainLoginData } from '@/services/auth/domain/entities/loging_response';\n\n/**\n * Convierte la respuesta del login del backend al dominio\n */\nexport function mapLoginResponseToDomain(\n  backendResponse: LoginData\n): DomainLoginData {\n  return {\n    user: {\n      id: backendResponse.user.id,\n      name: backendResponse.user.name,\n      email: backendResponse.user.email,\n      phone: backendResponse.user.phone,\n      avatarURL: backendResponse.user.avatar_url,        // ← snake_case → camelCase\n      isActive: backendResponse.user.is_active,          // ← snake_case → camelCase\n      lastLoginAt: backendResponse.user.last_login_at    // ← snake_case → camelCase\n    },\n    token: backendResponse.token,\n    requirePasswordChange: backendResponse.require_password_change,  // ← snake_case → camelCase\n    businesses: backendResponse.businesses.map(business => ({\n      id: business.id,\n      name: business.name,\n      code: business.code,\n      businessTypeId: business.business_type_id,        // ← snake_case → camelCase\n      businessType: {\n        id: business.business_type.id,\n        name: business.business_type.name,\n        code: business.business_type.code,\n        description: business.business_type.description,\n        icon: business.business_type.icon\n      },\n      timezone: business.timezone,\n      address: business.address,\n      description: business.description,\n      logoURL: business.logo_url,                      // ← snake_case → camelCase\n      primaryColor: business.primary_color,            // ← snake_case → camelCase\n      secondaryColor: business.secondary_color,        // ← snake_case → camelCase\n      tertiaryColor: business.tertiary_color,          // ← snake_case → camelCase\n      quaternaryColor: business.quaternary_color,      // ← snake_case → camelCase\n      navbarImageURL: business.navbar_image_url,       // ← snake_case → camelCase\n      customDomain: business.custom_domain,            // ← snake_case → camelCase\n      isActive: business.is_active,                    // ← snake_case → camelCase\n      enableDelivery: business.enable_delivery,        // ← snake_case → camelCase\n      enablePickup: business.enable_pickup,            // ← snake_case → camelCase\n      enableReservations: business.enable_reservations // ← snake_case → camelCase\n    }))\n  };\n} "],"names":[],"mappings":"AAAA;;;;;;;;CAQC;;;AAQM,SAAS,yBACd,eAA0B;IAE1B,OAAO;QACL,MAAM;YACJ,IAAI,gBAAgB,IAAI,CAAC,EAAE;YAC3B,MAAM,gBAAgB,IAAI,CAAC,IAAI;YAC/B,OAAO,gBAAgB,IAAI,CAAC,KAAK;YACjC,OAAO,gBAAgB,IAAI,CAAC,KAAK;YACjC,WAAW,gBAAgB,IAAI,CAAC,UAAU;YAC1C,UAAU,gBAAgB,IAAI,CAAC,SAAS;YACxC,aAAa,gBAAgB,IAAI,CAAC,aAAa,CAAI,2BAA2B;QAChF;QACA,OAAO,gBAAgB,KAAK;QAC5B,uBAAuB,gBAAgB,uBAAuB;QAC9D,YAAY,gBAAgB,UAAU,CAAC,GAAG,CAAC,CAAA,WAAY,CAAC;gBACtD,IAAI,SAAS,EAAE;gBACf,MAAM,SAAS,IAAI;gBACnB,MAAM,SAAS,IAAI;gBACnB,gBAAgB,SAAS,gBAAgB;gBACzC,cAAc;oBACZ,IAAI,SAAS,aAAa,CAAC,EAAE;oBAC7B,MAAM,SAAS,aAAa,CAAC,IAAI;oBACjC,MAAM,SAAS,aAAa,CAAC,IAAI;oBACjC,aAAa,SAAS,aAAa,CAAC,WAAW;oBAC/C,MAAM,SAAS,aAAa,CAAC,IAAI;gBACnC;gBACA,UAAU,SAAS,QAAQ;gBAC3B,SAAS,SAAS,OAAO;gBACzB,aAAa,SAAS,WAAW;gBACjC,SAAS,SAAS,QAAQ;gBAC1B,cAAc,SAAS,aAAa;gBACpC,gBAAgB,SAAS,eAAe;gBACxC,eAAe,SAAS,cAAc;gBACtC,iBAAiB,SAAS,gBAAgB;gBAC1C,gBAAgB,SAAS,gBAAgB;gBACzC,cAAc,SAAS,aAAa;gBACpC,UAAU,SAAS,SAAS;gBAC5B,gBAAgB,SAAS,eAAe;gBACxC,cAAc,SAAS,aAAa;gBACpC,oBAAoB,SAAS,mBAAmB,CAAC,2BAA2B;YAC9E,CAAC;IACH;AACF","debugId":null}},
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///home/cam/Desktop/reserve/front/central-next-js/src/services/auth/infrastructure/actions/mappers/roles-permissions.mapper.ts"],"sourcesContent":["/**\n * Mapper para roles y permisos\n * Convierte del backend (snake_case) al dominio (camelCase)\n * \n * RESUELVE EL PROBLEMA REAL:\n * - resource_name → resourceName\n * - is_super → isSuper\n */\n\nimport type { RolesPermissionsData } from '../response/roles-permissions';\nimport type { RolesPermissionsData as DomainRolesPermissionsData } from '@/services/auth/domain/entities/roles-permissions';\n\n/**\n * Convierte la respuesta de roles y permisos del backend al dominio\n */\nexport function mapRolesPermissionsResponseToDomain(\n  backendResponse: RolesPermissionsData\n): DomainRolesPermissionsData {\n  return {\n    isSuper: backendResponse.is_super,                    // ← snake_case → camelCase\n    roles: backendResponse.roles.map(role => ({\n      id: role.id,\n      name: role.name,\n      code: role.code,\n      description: role.description,\n      level: role.level,\n      scope: role.scope\n    })),\n    resources: backendResponse.resources.map(resource => ({\n      resource: resource.resource,\n      resourceName: resource.resource_name,               // ← snake_case → camelCase\n      actions: resource.actions.map(action => ({\n        id: action.id,\n        name: action.name,\n        code: action.code,\n        description: action.description,\n        resource: action.resource,\n        action: action.action,\n        scope: action.scope\n      }))\n    }))\n  };\n} "],"names":[],"mappings":"AAAA;;;;;;;CAOC;;;AAQM,SAAS,oCACd,eAAqC;IAErC,OAAO;QACL,SAAS,gBAAgB,QAAQ;QACjC,OAAO,gBAAgB,KAAK,CAAC,GAAG,CAAC,CAAA,OAAQ,CAAC;gBACxC,IAAI,KAAK,EAAE;gBACX,MAAM,KAAK,IAAI;gBACf,MAAM,KAAK,IAAI;gBACf,aAAa,KAAK,WAAW;gBAC7B,OAAO,KAAK,KAAK;gBACjB,OAAO,KAAK,KAAK;YACnB,CAAC;QACD,WAAW,gBAAgB,SAAS,CAAC,GAAG,CAAC,CAAA,WAAY,CAAC;gBACpD,UAAU,SAAS,QAAQ;gBAC3B,cAAc,SAAS,aAAa;gBACpC,SAAS,SAAS,OAAO,CAAC,GAAG,CAAC,CAAA,SAAU,CAAC;wBACvC,IAAI,OAAO,EAAE;wBACb,MAAM,OAAO,IAAI;wBACjB,MAAM,OAAO,IAAI;wBACjB,aAAa,OAAO,WAAW;wBAC/B,UAAU,OAAO,QAAQ;wBACzB,QAAQ,OAAO,MAAM;wBACrB,OAAO,OAAO,KAAK;oBACrB,CAAC;YACH,CAAC;IACH;AACF","debugId":null}},
    {"offset": {"line": 127, "column": 0}, "map": {"version":3,"sources":["file:///home/cam/Desktop/reserve/front/central-next-js/src/services/auth/infrastructure/actions/mappers/auth.mapper.ts"],"sourcesContent":["/**\n * Mappers para entidades de autenticación\n * Convierte entre diferentes formatos de datos de autenticación\n */\n\nimport type { LoginCredentials } from '../../../domain/entities/Auth';\nimport type { LoginRequest } from '../request/login';\n\n/**\n * Convierte LoginRequest (infraestructura) a LoginCredentials (dominio)\n * @param loginRequest - Datos de login desde la infraestructura\n * @returns LoginCredentials en formato del dominio\n */\nexport function mapLoginRequestToLoginCredentials(loginRequest: LoginRequest): LoginCredentials {\n  return {\n    email: loginRequest.email,\n    password: loginRequest.password\n  };\n}\n\n/**\n * Convierte LoginCredentials (dominio) a LoginRequest (infraestructura)\n * @param loginCredentials - Credenciales del dominio\n * @returns LoginRequest en formato de infraestructura\n */\nexport function mapLoginCredentialsToLoginRequest(loginCredentials: LoginCredentials): LoginRequest {\n  return {\n    email: loginCredentials.email,\n    password: loginCredentials.password\n  };\n}\n\n/**\n * Convierte FormData a LoginCredentials (dominio)\n * @param formData - FormData del formulario de login\n * @returns LoginCredentials en formato del dominio\n */\nexport function mapFormDataToLoginCredentials(formData: FormData): LoginCredentials {\n  return {\n    email: formData.get('email') as string,\n    password: formData.get('password') as string\n  };\n}\n\n/**\n * Convierte FormData a LoginRequest (infraestructura)\n * @param formData - FormData del formulario de login\n * @returns LoginRequest en formato de infraestructura\n */\nexport function mapFormDataToLoginRequest(formData: FormData): LoginRequest {\n  return {\n    email: formData.get('email') as string,\n    password: formData.get('password') as string\n  };\n} "],"names":[],"mappings":"AAAA;;;CAGC;;;;;;AAUM,SAAS,kCAAkC,YAA0B;IAC1E,OAAO;QACL,OAAO,aAAa,KAAK;QACzB,UAAU,aAAa,QAAQ;IACjC;AACF;AAOO,SAAS,kCAAkC,gBAAkC;IAClF,OAAO;QACL,OAAO,iBAAiB,KAAK;QAC7B,UAAU,iBAAiB,QAAQ;IACrC;AACF;AAOO,SAAS,8BAA8B,QAAkB;IAC9D,OAAO;QACL,OAAO,SAAS,GAAG,CAAC;QACpB,UAAU,SAAS,GAAG,CAAC;IACzB;AACF;AAOO,SAAS,0BAA0B,QAAkB;IAC1D,OAAO;QACL,OAAO,SAAS,GAAG,CAAC;QACpB,UAAU,SAAS,GAAG,CAAC;IACzB;AACF","debugId":null}},
    {"offset": {"line": 164, "column": 0}, "map": {"version":3,"sources":["file:///home/cam/Desktop/reserve/front/central-next-js/src/services/auth/infrastructure/actions/mappers/index.ts"],"sourcesContent":["/**\n * Exportaciones de todos los mappers de autenticación\n */\n\n// Mapper para la respuesta del login (usuario, token, businesses)\nexport { mapLoginResponseToDomain } from './login-response.mapper';\n\n// Mapper para roles y permisos\nexport { mapRolesPermissionsResponseToDomain } from './roles-permissions.mapper';\n\n// Mappers para credenciales de login\nexport {\n  mapLoginRequestToLoginCredentials,\n  mapFormDataToLoginCredentials\n} from './auth.mapper';\n\n// Tipos para la respuesta del backend\nexport type { LoginData } from '../response/login';\nexport type { RolesPermissionsData } from '../response/roles-permissions';\n\n"],"names":[],"mappings":"AAAA;;CAEC,GAED,kEAAkE;;AAClE;AAEA,+BAA+B;AAC/B;AAEA,qCAAqC;AACrC","debugId":null}},
    {"offset": {"line": 189, "column": 0}, "map": {"version":3,"sources":["file:///home/cam/Desktop/reserve/front/central-next-js/src/services/auth/infrastructure/actions/login.action.ts"],"sourcesContent":["'use server';\n\nimport { cookies } from 'next/headers';\nimport { getApiBaseUrl } from '@/server/config/env';\nimport { LoginResponse } from '@/services/auth/domain/entities/loging_response';\nimport { LoginRequest } from '@/services/auth/infrastructure/actions/request/login';\nimport { LoginCredentials } from '@/services/auth/domain/entities/Auth';\nimport { \n  mapLoginRequestToLoginCredentials,\n  mapLoginResponseToDomain\n} from '@/services/auth/infrastructure/actions/mappers';\n\nexport async function loginAction(request: LoginRequest): Promise<LoginResponse> {\n  try {\n    const loginCredentials: LoginCredentials = mapLoginRequestToLoginCredentials(request);\n    \n    const { email, password } = loginCredentials;\n\n    const response = await fetch(`${getApiBaseUrl()}/api/v1/auth/login`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ email, password }),\n    });\n\n    const data = await response.json();\n    \n    if (!response.ok) {\n      return data;\n    }\n    \n    const mappedResponse = mapLoginResponseToDomain(data.data);\n    \n    const cookieStore = await cookies();\n    cookieStore.set('auth-token', mappedResponse.token, {\n      httpOnly: true,\n      secure: true,\n      sameSite: 'lax',\n      maxAge: 60 * 60 * 24 * 7\n    });\n\n    const userWithBusinesses = {\n      ...mappedResponse.user,\n      businesses: mappedResponse.businesses\n    };\n    \n    cookieStore.set('user-info', JSON.stringify(userWithBusinesses), {\n      httpOnly: true,\n      secure: true,\n      sameSite: 'lax',\n      maxAge: 60 * 60 * 24 * 7\n    });\n\n    return {\n      success: true,\n      data: mappedResponse\n    };\n  } catch (error) {\n    console.error('Login action error:', error);\n    return {\n      success: false,\n      message: 'Error interno del servidor'\n    };\n  }\n} "],"names":[],"mappings":";;;;AAEA;AACA;AAIA;AAAA;AAAA;;;;;;AAKO,eAAe,YAAY,OAAqB;IACrD,IAAI;QACF,MAAM,mBAAqC,CAAA,GAAA,iLAAA,CAAA,oCAAiC,AAAD,EAAE;QAE7E,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG;QAE5B,MAAM,WAAW,MAAM,MAAM,GAAG,CAAA,GAAA,8HAAA,CAAA,gBAAa,AAAD,IAAI,kBAAkB,CAAC,EAAE;YACnE,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;YACA,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAO;YAAS;QACzC;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,OAAO;QACT;QAEA,MAAM,iBAAiB,CAAA,GAAA,8LAAA,CAAA,2BAAwB,AAAD,EAAE,KAAK,IAAI;QAEzD,MAAM,cAAc,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;QAChC,YAAY,GAAG,CAAC,cAAc,eAAe,KAAK,EAAE;YAClD,UAAU;YACV,QAAQ;YACR,UAAU;YACV,QAAQ,KAAK,KAAK,KAAK;QACzB;QAEA,MAAM,qBAAqB;YACzB,GAAG,eAAe,IAAI;YACtB,YAAY,eAAe,UAAU;QACvC;QAEA,YAAY,GAAG,CAAC,aAAa,KAAK,SAAS,CAAC,qBAAqB;YAC/D,UAAU;YACV,QAAQ;YACR,UAAU;YACV,QAAQ,KAAK,KAAK,KAAK;QACzB;QAEA,OAAO;YACL,SAAS;YACT,MAAM;QACR;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO;YACL,SAAS;YACT,SAAS;QACX;IACF;AACF;;;IArDsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 260, "column": 0}, "map": {"version":3,"sources":["file:///home/cam/Desktop/reserve/front/central-next-js/src/services/auth/infrastructure/actions/logout.action.ts"],"sourcesContent":["'use server';\n\nimport { cookies } from 'next/headers';\n\nexport interface LogoutResponse {\n  success: boolean;\n  message?: string;\n}\n\nexport async function logoutAction(): Promise<LogoutResponse> {\n  try {\n    const cookieStore = await cookies();\n    cookieStore.delete('auth-token');\n    cookieStore.delete('user-info');\n    \n    return {\n      success: true,\n      message: 'Logout exitoso'\n    };\n  } catch (error) {\n    console.error('Logout action error:', error);\n    return {\n      success: false,\n      message: 'Error al hacer logout'\n    };\n  }\n} "],"names":[],"mappings":";;;;AAEA;;;;AAOO,eAAe;IACpB,IAAI;QACF,MAAM,cAAc,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;QAChC,YAAY,MAAM,CAAC;QACnB,YAAY,MAAM,CAAC;QAEnB,OAAO;YACL,SAAS;YACT,SAAS;QACX;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO;YACL,SAAS;YACT,SAAS;QACX;IACF;AACF;;;IAjBsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 294, "column": 0}, "map": {"version":3,"sources":["file:///home/cam/Desktop/reserve/front/central-next-js/src/services/auth/infrastructure/actions/check-auth.action.ts"],"sourcesContent":["'use server';\n\nimport { cookies } from 'next/headers';\nimport { getApiBaseUrl } from '@/server/config/env';\n\nexport interface CheckAuthResponse {\n  isAuthenticated: boolean;\n  user?: any;\n}\n\nexport async function checkAuthAction(): Promise<CheckAuthResponse> {\n  try {\n    const cookieStore = await cookies();\n    const token = cookieStore.get('auth-token');\n    const userInfo = cookieStore.get('user-info');\n\n    if (!token || !userInfo) {\n      return { isAuthenticated: false };\n    }\n\n    // Verificar token con el backend\n    const response = await fetch(`${getApiBaseUrl()}/api/v1/auth/verify`, {\n      headers: {\n        'Authorization': `Bearer ${token.value}`,\n      },\n    });\n\n    if (!response.ok) {\n      // Token inválido, limpiar cookies\n      cookieStore.delete('auth-token');\n      cookieStore.delete('user-info');\n      return { isAuthenticated: false };\n    }\n\n    const user = JSON.parse(userInfo.value);\n    return {\n      isAuthenticated: true,\n      user\n    };\n  } catch (error) {\n    console.error('Check auth action error:', error);\n    return { isAuthenticated: false };\n  }\n} "],"names":[],"mappings":";;;;AAEA;AACA;;;;;AAOO,eAAe;IACpB,IAAI;QACF,MAAM,cAAc,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;QAChC,MAAM,QAAQ,YAAY,GAAG,CAAC;QAC9B,MAAM,WAAW,YAAY,GAAG,CAAC;QAEjC,IAAI,CAAC,SAAS,CAAC,UAAU;YACvB,OAAO;gBAAE,iBAAiB;YAAM;QAClC;QAEA,iCAAiC;QACjC,MAAM,WAAW,MAAM,MAAM,GAAG,CAAA,GAAA,8HAAA,CAAA,gBAAa,AAAD,IAAI,mBAAmB,CAAC,EAAE;YACpE,SAAS;gBACP,iBAAiB,CAAC,OAAO,EAAE,MAAM,KAAK,EAAE;YAC1C;QACF;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,kCAAkC;YAClC,YAAY,MAAM,CAAC;YACnB,YAAY,MAAM,CAAC;YACnB,OAAO;gBAAE,iBAAiB;YAAM;QAClC;QAEA,MAAM,OAAO,KAAK,KAAK,CAAC,SAAS,KAAK;QACtC,OAAO;YACL,iBAAiB;YACjB;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO;YAAE,iBAAiB;QAAM;IAClC;AACF;;;IAjCsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 349, "column": 0}, "map": {"version":3,"sources":["file:///home/cam/Desktop/reserve/front/central-next-js/src/services/auth/infrastructure/actions/get-user-roles-permissions.action.ts"],"sourcesContent":["'use server';\n\nimport { cookies } from 'next/headers';\nimport { getApiBaseUrl } from '@/server/config/env';\n\nexport interface GetUserRolesPermissionsResponse {\n  success: boolean;\n  data?: any;\n  message?: string;\n}\n\nexport async function getUserRolesPermissionsAction(): Promise<GetUserRolesPermissionsResponse> {\n  try {\n    const cookieStore = await cookies();\n    const token = cookieStore.get('auth-token');\n\n    if (!token) {\n      return {\n        success: false,\n        message: 'No autorizado'\n      };\n    }\n\n    const response = await fetch(`${getApiBaseUrl()}/api/v1/auth/roles-permissions`, {\n      headers: {\n        'Authorization': `Bearer ${token.value}`,\n      },\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      return {\n        success: false,\n        message: errorData.message || 'Error al obtener permisos'\n      };\n    }\n\n    const data = await response.json();\n    \n    return {\n      success: true,\n      data: data.data || {}\n    };\n  } catch (error) {\n    console.error('Get user roles permissions action error:', error);\n    return {\n      success: false,\n      message: 'Error interno del servidor'\n    };\n  }\n} "],"names":[],"mappings":";;;;AAEA;AACA;;;;;AAQO,eAAe;IACpB,IAAI;QACF,MAAM,cAAc,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;QAChC,MAAM,QAAQ,YAAY,GAAG,CAAC;QAE9B,IAAI,CAAC,OAAO;YACV,OAAO;gBACL,SAAS;gBACT,SAAS;YACX;QACF;QAEA,MAAM,WAAW,MAAM,MAAM,GAAG,CAAA,GAAA,8HAAA,CAAA,gBAAa,AAAD,IAAI,8BAA8B,CAAC,EAAE;YAC/E,SAAS;gBACP,iBAAiB,CAAC,OAAO,EAAE,MAAM,KAAK,EAAE;YAC1C;QACF;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,YAAY,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;YACvD,OAAO;gBACL,SAAS;gBACT,SAAS,UAAU,OAAO,IAAI;YAChC;QACF;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,OAAO;YACL,SAAS;YACT,MAAM,KAAK,IAAI,IAAI,CAAC;QACtB;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4CAA4C;QAC1D,OAAO;YACL,SAAS;YACT,SAAS;QACX;IACF;AACF;;;IAvCsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 403, "column": 0}, "map": {"version":3,"sources":["file:///home/cam/Desktop/reserve/front/central-next-js/src/services/auth/infrastructure/actions/change-password.action.ts"],"sourcesContent":["'use server';\n\nimport { cookies } from 'next/headers';\nimport { getApiBaseUrl } from '@/server/config/env';\n\nexport interface ChangePasswordRequest {\n  currentPassword: string;\n  newPassword: string;\n}\n\nexport interface ChangePasswordResponse {\n  success: boolean;\n  message?: string;\n}\n\nexport async function changePasswordAction(formData: FormData): Promise<ChangePasswordResponse> {\n  try {\n    const cookieStore = await cookies();\n    const token = cookieStore.get('auth-token');\n\n    if (!token) {\n      return {\n        success: false,\n        message: 'No autorizado'\n      };\n    }\n\n    const currentPassword = formData.get('currentPassword') as string;\n    const newPassword = formData.get('newPassword') as string;\n\n    const response = await fetch(`${getApiBaseUrl()}/api/v1/auth/change-password`, {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${token.value}`,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ currentPassword, newPassword }),\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      return {\n        success: false,\n        message: errorData.message || 'Error al cambiar contraseña'\n      };\n    }\n\n    return {\n      success: true,\n      message: 'Contraseña cambiada exitosamente'\n    };\n  } catch (error) {\n    console.error('Change password action error:', error);\n    return {\n      success: false,\n      message: 'Error interno del servidor'\n    };\n  }\n} "],"names":[],"mappings":";;;;AAEA;AACA;;;;;AAYO,eAAe,qBAAqB,QAAkB;IAC3D,IAAI;QACF,MAAM,cAAc,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;QAChC,MAAM,QAAQ,YAAY,GAAG,CAAC;QAE9B,IAAI,CAAC,OAAO;YACV,OAAO;gBACL,SAAS;gBACT,SAAS;YACX;QACF;QAEA,MAAM,kBAAkB,SAAS,GAAG,CAAC;QACrC,MAAM,cAAc,SAAS,GAAG,CAAC;QAEjC,MAAM,WAAW,MAAM,MAAM,GAAG,CAAA,GAAA,8HAAA,CAAA,gBAAa,AAAD,IAAI,4BAA4B,CAAC,EAAE;YAC7E,QAAQ;YACR,SAAS;gBACP,iBAAiB,CAAC,OAAO,EAAE,MAAM,KAAK,EAAE;gBACxC,gBAAgB;YAClB;YACA,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAiB;YAAY;QACtD;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,YAAY,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;YACvD,OAAO;gBACL,SAAS;gBACT,SAAS,UAAU,OAAO,IAAI;YAChC;QACF;QAEA,OAAO;YACL,SAAS;YACT,SAAS;QACX;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iCAAiC;QAC/C,OAAO;YACL,SAAS;YACT,SAAS;QACX;IACF;AACF;;;IA3CsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 464, "column": 0}, "map": {"version":3,"sources":["file:///home/cam/Desktop/reserve/front/central-next-js/.next-internal/server/app/%28public%29/login/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {loginAction as '40c04dffc46a6ac2ea625f30d6081a9ab1eee15034'} from 'ACTIONS_MODULE0'\nexport {logoutAction as '00c1abbfdd029388af34062ae96310c803b790e24b'} from 'ACTIONS_MODULE1'\nexport {checkAuthAction as '009f6e27219832bbf49a7dc5fb98d8868368e13256'} from 'ACTIONS_MODULE2'\nexport {getUserRolesPermissionsAction as '00d8053e69f11d14d40bb6285d4199d0ca192613b4'} from 'ACTIONS_MODULE3'\nexport {changePasswordAction as '406980ba9c8a1241a56e5429947e3e73200a0b8445'} from 'ACTIONS_MODULE4'\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA","debugId":null}},
    {"offset": {"line": 532, "column": 0}, "map": {"version":3,"sources":["file:///home/cam/Desktop/reserve/front/central-next-js/src/services/auth/ui/pages/LoginPage.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/services/auth/ui/pages/LoginPage.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/services/auth/ui/pages/LoginPage.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,6OAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA4S,GACzU,0EACA","debugId":null}},
    {"offset": {"line": 544, "column": 0}, "map": {"version":3,"sources":["file:///home/cam/Desktop/reserve/front/central-next-js/src/services/auth/ui/pages/LoginPage.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/services/auth/ui/pages/LoginPage.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/services/auth/ui/pages/LoginPage.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,6OAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAwR,GACrT,sDACA","debugId":null}},
    {"offset": {"line": 556, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 564, "column": 0}, "map": {"version":3,"sources":["file:///home/cam/Desktop/reserve/front/central-next-js/src/app/%28public%29/login/page.tsx"],"sourcesContent":["import LoginPage from '@/services/auth/ui/pages/LoginPage';\n\nexport default function Login() {\n  return <LoginPage />;\n} "],"names":[],"mappings":";;;;AAAA;;;AAEe,SAAS;IACtB,qBAAO,8OAAC,oJAAA,CAAA,UAAS;;;;;AACnB","debugId":null}}]
}