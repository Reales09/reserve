module.exports = {

"[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"));

module.exports = mod;
}}),
"[project]/src/services/auth/infrastructure/actions/index.ts [app-ssr] (ecmascript) <locals>": ((__turbopack_context__) => {
"use strict";

// Exportar todas las acciones de autenticaci√≥n
__turbopack_context__.s({});
;
;
;
;
;
}),
"[project]/src/services/auth/infrastructure/actions/index.ts [app-ssr] (ecmascript) <module evaluation>": ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$auth$2f$infrastructure$2f$actions$2f$index$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/src/services/auth/infrastructure/actions/index.ts [app-ssr] (ecmascript) <locals>");
}),
"[project]/src/services/auth/infrastructure/actions/data:36f315 [app-ssr] (ecmascript) <text/javascript>": ((__turbopack_context__) => {
"use strict";

/* __next_internal_action_entry_do_not_use__ [{"40c04dffc46a6ac2ea625f30d6081a9ab1eee15034":"loginAction"},"src/services/auth/infrastructure/actions/login.action.ts",""] */ __turbopack_context__.s({
    "loginAction": ()=>loginAction
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-ssr] (ecmascript)");
"use turbopack no side effects";
;
var loginAction = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["createServerReference"])("40c04dffc46a6ac2ea625f30d6081a9ab1eee15034", __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["findSourceMapURL"], "loginAction"); //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vbG9naW4uYWN0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc2VydmVyJztcblxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XG5pbXBvcnQgeyBnZXRBcGlCYXNlVXJsIH0gZnJvbSAnQC9zZXJ2ZXIvY29uZmlnL2Vudic7XG5pbXBvcnQgeyBMb2dpblJlc3BvbnNlIH0gZnJvbSAnQC9zZXJ2aWNlcy9hdXRoL2RvbWFpbi9lbnRpdGllcy9sb2dpbmdfcmVzcG9uc2UnO1xuaW1wb3J0IHsgTG9naW5SZXF1ZXN0IH0gZnJvbSAnQC9zZXJ2aWNlcy9hdXRoL2luZnJhc3RydWN0dXJlL2FjdGlvbnMvcmVxdWVzdC9sb2dpbic7XG5pbXBvcnQgeyBMb2dpbkNyZWRlbnRpYWxzIH0gZnJvbSAnQC9zZXJ2aWNlcy9hdXRoL2RvbWFpbi9lbnRpdGllcy9BdXRoJztcbmltcG9ydCB7IFxuICBtYXBMb2dpblJlcXVlc3RUb0xvZ2luQ3JlZGVudGlhbHMsXG4gIG1hcExvZ2luUmVzcG9uc2VUb0RvbWFpblxufSBmcm9tICdAL3NlcnZpY2VzL2F1dGgvaW5mcmFzdHJ1Y3R1cmUvYWN0aW9ucy9tYXBwZXJzJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ2luQWN0aW9uKHJlcXVlc3Q6IExvZ2luUmVxdWVzdCk6IFByb21pc2U8TG9naW5SZXNwb25zZT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGxvZ2luQ3JlZGVudGlhbHM6IExvZ2luQ3JlZGVudGlhbHMgPSBtYXBMb2dpblJlcXVlc3RUb0xvZ2luQ3JlZGVudGlhbHMocmVxdWVzdCk7XG4gICAgXG4gICAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IGxvZ2luQ3JlZGVudGlhbHM7XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke2dldEFwaUJhc2VVcmwoKX0vYXBpL3YxL2F1dGgvbG9naW5gLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGVtYWlsLCBwYXNzd29yZCB9KSxcbiAgICB9KTtcblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IG1hcHBlZFJlc3BvbnNlID0gbWFwTG9naW5SZXNwb25zZVRvRG9tYWluKGRhdGEuZGF0YSk7XG4gICAgXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XG4gICAgY29va2llU3RvcmUuc2V0KCdhdXRoLXRva2VuJywgbWFwcGVkUmVzcG9uc2UudG9rZW4sIHtcbiAgICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgICAgc2VjdXJlOiB0cnVlLFxuICAgICAgc2FtZVNpdGU6ICdsYXgnLFxuICAgICAgbWF4QWdlOiA2MCAqIDYwICogMjQgKiA3XG4gICAgfSk7XG5cbiAgICBjb25zdCB1c2VyV2l0aEJ1c2luZXNzZXMgPSB7XG4gICAgICAuLi5tYXBwZWRSZXNwb25zZS51c2VyLFxuICAgICAgYnVzaW5lc3NlczogbWFwcGVkUmVzcG9uc2UuYnVzaW5lc3Nlc1xuICAgIH07XG4gICAgXG4gICAgY29va2llU3RvcmUuc2V0KCd1c2VyLWluZm8nLCBKU09OLnN0cmluZ2lmeSh1c2VyV2l0aEJ1c2luZXNzZXMpLCB7XG4gICAgICBodHRwT25seTogdHJ1ZSxcbiAgICAgIHNlY3VyZTogdHJ1ZSxcbiAgICAgIHNhbWVTaXRlOiAnbGF4JyxcbiAgICAgIG1heEFnZTogNjAgKiA2MCAqIDI0ICogN1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiBtYXBwZWRSZXNwb25zZVxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignTG9naW4gYWN0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBtZXNzYWdlOiAnRXJyb3IgaW50ZXJubyBkZWwgc2Vydmlkb3InXG4gICAgfTtcbiAgfVxufSAiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjZUQVlzQiJ9
}),
"[project]/src/services/auth/infrastructure/actions/data:767e26 [app-ssr] (ecmascript) <text/javascript>": ((__turbopack_context__) => {
"use strict";

/* __next_internal_action_entry_do_not_use__ [{"00c1abbfdd029388af34062ae96310c803b790e24b":"logoutAction"},"src/services/auth/infrastructure/actions/logout.action.ts",""] */ __turbopack_context__.s({
    "logoutAction": ()=>logoutAction
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-ssr] (ecmascript)");
"use turbopack no side effects";
;
var logoutAction = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["createServerReference"])("00c1abbfdd029388af34062ae96310c803b790e24b", __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["findSourceMapURL"], "logoutAction"); //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vbG9nb3V0LmFjdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHNlcnZlcic7XG5cbmltcG9ydCB7IGNvb2tpZXMgfSBmcm9tICduZXh0L2hlYWRlcnMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIExvZ291dFJlc3BvbnNlIHtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgbWVzc2FnZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ291dEFjdGlvbigpOiBQcm9taXNlPExvZ291dFJlc3BvbnNlPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XG4gICAgY29va2llU3RvcmUuZGVsZXRlKCdhdXRoLXRva2VuJyk7XG4gICAgY29va2llU3RvcmUuZGVsZXRlKCd1c2VyLWluZm8nKTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1lc3NhZ2U6ICdMb2dvdXQgZXhpdG9zbydcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0xvZ291dCBhY3Rpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6ICdFcnJvciBhbCBoYWNlciBsb2dvdXQnXG4gICAgfTtcbiAgfVxufSAiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IitUQVNzQiJ9
}),
"[project]/src/services/auth/infrastructure/actions/data:e50e78 [app-ssr] (ecmascript) <text/javascript>": ((__turbopack_context__) => {
"use strict";

/* __next_internal_action_entry_do_not_use__ [{"009f6e27219832bbf49a7dc5fb98d8868368e13256":"checkAuthAction"},"src/services/auth/infrastructure/actions/check-auth.action.ts",""] */ __turbopack_context__.s({
    "checkAuthAction": ()=>checkAuthAction
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-ssr] (ecmascript)");
"use turbopack no side effects";
;
var checkAuthAction = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["createServerReference"])("009f6e27219832bbf49a7dc5fb98d8868368e13256", __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["findSourceMapURL"], "checkAuthAction"); //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vY2hlY2stYXV0aC5hY3Rpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzZXJ2ZXInO1xuXG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSAnbmV4dC9oZWFkZXJzJztcbmltcG9ydCB7IGdldEFwaUJhc2VVcmwgfSBmcm9tICdAL3NlcnZlci9jb25maWcvZW52JztcblxuZXhwb3J0IGludGVyZmFjZSBDaGVja0F1dGhSZXNwb25zZSB7XG4gIGlzQXV0aGVudGljYXRlZDogYm9vbGVhbjtcbiAgdXNlcj86IGFueTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrQXV0aEFjdGlvbigpOiBQcm9taXNlPENoZWNrQXV0aFJlc3BvbnNlPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XG4gICAgY29uc3QgdG9rZW4gPSBjb29raWVTdG9yZS5nZXQoJ2F1dGgtdG9rZW4nKTtcbiAgICBjb25zdCB1c2VySW5mbyA9IGNvb2tpZVN0b3JlLmdldCgndXNlci1pbmZvJyk7XG5cbiAgICBpZiAoIXRva2VuIHx8ICF1c2VySW5mbykge1xuICAgICAgcmV0dXJuIHsgaXNBdXRoZW50aWNhdGVkOiBmYWxzZSB9O1xuICAgIH1cblxuICAgIC8vIFZlcmlmaWNhciB0b2tlbiBjb24gZWwgYmFja2VuZFxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7Z2V0QXBpQmFzZVVybCgpfS9hcGkvdjEvYXV0aC92ZXJpZnlgLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3Rva2VuLnZhbHVlfWAsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgLy8gVG9rZW4gaW52w6FsaWRvLCBsaW1waWFyIGNvb2tpZXNcbiAgICAgIGNvb2tpZVN0b3JlLmRlbGV0ZSgnYXV0aC10b2tlbicpO1xuICAgICAgY29va2llU3RvcmUuZGVsZXRlKCd1c2VyLWluZm8nKTtcbiAgICAgIHJldHVybiB7IGlzQXV0aGVudGljYXRlZDogZmFsc2UgfTtcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyID0gSlNPTi5wYXJzZSh1c2VySW5mby52YWx1ZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzQXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICAgIHVzZXJcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0NoZWNrIGF1dGggYWN0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4geyBpc0F1dGhlbnRpY2F0ZWQ6IGZhbHNlIH07XG4gIH1cbn0gIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJzVUFVc0IifQ==
}),
"[project]/src/services/auth/infrastructure/actions/data:6e3792 [app-ssr] (ecmascript) <text/javascript>": ((__turbopack_context__) => {
"use strict";

/* __next_internal_action_entry_do_not_use__ [{"00d8053e69f11d14d40bb6285d4199d0ca192613b4":"getUserRolesPermissionsAction"},"src/services/auth/infrastructure/actions/get-user-roles-permissions.action.ts",""] */ __turbopack_context__.s({
    "getUserRolesPermissionsAction": ()=>getUserRolesPermissionsAction
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-ssr] (ecmascript)");
"use turbopack no side effects";
;
var getUserRolesPermissionsAction = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["createServerReference"])("00d8053e69f11d14d40bb6285d4199d0ca192613b4", __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["findSourceMapURL"], "getUserRolesPermissionsAction"); //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vZ2V0LXVzZXItcm9sZXMtcGVybWlzc2lvbnMuYWN0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc2VydmVyJztcblxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XG5pbXBvcnQgeyBnZXRBcGlCYXNlVXJsIH0gZnJvbSAnQC9zZXJ2ZXIvY29uZmlnL2Vudic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgR2V0VXNlclJvbGVzUGVybWlzc2lvbnNSZXNwb25zZSB7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIGRhdGE/OiBhbnk7XG4gIG1lc3NhZ2U/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyUm9sZXNQZXJtaXNzaW9uc0FjdGlvbigpOiBQcm9taXNlPEdldFVzZXJSb2xlc1Blcm1pc3Npb25zUmVzcG9uc2U+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKTtcbiAgICBjb25zdCB0b2tlbiA9IGNvb2tpZVN0b3JlLmdldCgnYXV0aC10b2tlbicpO1xuXG4gICAgaWYgKCF0b2tlbikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdObyBhdXRvcml6YWRvJ1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke2dldEFwaUJhc2VVcmwoKX0vYXBpL3YxL2F1dGgvcm9sZXMtcGVybWlzc2lvbnNgLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3Rva2VuLnZhbHVlfWAsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpLmNhdGNoKCgpID0+ICh7fSkpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yRGF0YS5tZXNzYWdlIHx8ICdFcnJvciBhbCBvYnRlbmVyIHBlcm1pc29zJ1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZGF0YTogZGF0YS5kYXRhIHx8IHt9XG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdHZXQgdXNlciByb2xlcyBwZXJtaXNzaW9ucyBhY3Rpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6ICdFcnJvciBpbnRlcm5vIGRlbCBzZXJ2aWRvcidcbiAgICB9O1xuICB9XG59ICJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoib1dBV3NCIn0=
}),
"[project]/src/services/auth/infrastructure/actions/data:00c0f4 [app-ssr] (ecmascript) <text/javascript>": ((__turbopack_context__) => {
"use strict";

/* __next_internal_action_entry_do_not_use__ [{"406980ba9c8a1241a56e5429947e3e73200a0b8445":"changePasswordAction"},"src/services/auth/infrastructure/actions/change-password.action.ts",""] */ __turbopack_context__.s({
    "changePasswordAction": ()=>changePasswordAction
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-ssr] (ecmascript)");
"use turbopack no side effects";
;
var changePasswordAction = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["createServerReference"])("406980ba9c8a1241a56e5429947e3e73200a0b8445", __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["findSourceMapURL"], "changePasswordAction"); //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vY2hhbmdlLXBhc3N3b3JkLmFjdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHNlcnZlcic7XG5cbmltcG9ydCB7IGNvb2tpZXMgfSBmcm9tICduZXh0L2hlYWRlcnMnO1xuaW1wb3J0IHsgZ2V0QXBpQmFzZVVybCB9IGZyb20gJ0Avc2VydmVyL2NvbmZpZy9lbnYnO1xuXG5leHBvcnQgaW50ZXJmYWNlIENoYW5nZVBhc3N3b3JkUmVxdWVzdCB7XG4gIGN1cnJlbnRQYXNzd29yZDogc3RyaW5nO1xuICBuZXdQYXNzd29yZDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENoYW5nZVBhc3N3b3JkUmVzcG9uc2Uge1xuICBzdWNjZXNzOiBib29sZWFuO1xuICBtZXNzYWdlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hhbmdlUGFzc3dvcmRBY3Rpb24oZm9ybURhdGE6IEZvcm1EYXRhKTogUHJvbWlzZTxDaGFuZ2VQYXNzd29yZFJlc3BvbnNlPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgY29va2llU3RvcmUgPSBhd2FpdCBjb29raWVzKCk7XG4gICAgY29uc3QgdG9rZW4gPSBjb29raWVTdG9yZS5nZXQoJ2F1dGgtdG9rZW4nKTtcblxuICAgIGlmICghdG9rZW4pIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnTm8gYXV0b3JpemFkbydcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3QgY3VycmVudFBhc3N3b3JkID0gZm9ybURhdGEuZ2V0KCdjdXJyZW50UGFzc3dvcmQnKSBhcyBzdHJpbmc7XG4gICAgY29uc3QgbmV3UGFzc3dvcmQgPSBmb3JtRGF0YS5nZXQoJ25ld1Bhc3N3b3JkJykgYXMgc3RyaW5nO1xuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtnZXRBcGlCYXNlVXJsKCl9L2FwaS92MS9hdXRoL2NoYW5nZS1wYXNzd29yZGAsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0b2tlbi52YWx1ZX1gLFxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgY3VycmVudFBhc3N3b3JkLCBuZXdQYXNzd29yZCB9KSxcbiAgICB9KTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKS5jYXRjaCgoKSA9PiAoe30pKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiBlcnJvckRhdGEubWVzc2FnZSB8fCAnRXJyb3IgYWwgY2FtYmlhciBjb250cmFzZcOxYSdcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtZXNzYWdlOiAnQ29udHJhc2XDsWEgY2FtYmlhZGEgZXhpdG9zYW1lbnRlJ1xuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignQ2hhbmdlIHBhc3N3b3JkIGFjdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgbWVzc2FnZTogJ0Vycm9yIGludGVybm8gZGVsIHNlcnZpZG9yJ1xuICAgIH07XG4gIH1cbn0gIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJnVkFlc0IifQ==
}),
"[project]/src/services/auth/infrastructure/actions/mappers/login-response.mapper.ts [app-ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

/**
 * Mapper para la respuesta del login
 * Convierte del backend (snake_case) al dominio (camelCase)
 * 
 * RESUELVE EL PROBLEMA REAL:
 * - avatar_url ‚Üí avatarURL
 * - is_active ‚Üí isActive
 * - logo_url ‚Üí logoURL
 */ __turbopack_context__.s({
    "mapLoginResponseToDomain": ()=>mapLoginResponseToDomain
});
function mapLoginResponseToDomain(backendResponse) {
    return {
        user: {
            id: backendResponse.user.id,
            name: backendResponse.user.name,
            email: backendResponse.user.email,
            phone: backendResponse.user.phone,
            avatarURL: backendResponse.user.avatar_url,
            isActive: backendResponse.user.is_active,
            lastLoginAt: backendResponse.user.last_login_at // ‚Üê snake_case ‚Üí camelCase
        },
        token: backendResponse.token,
        requirePasswordChange: backendResponse.require_password_change,
        businesses: backendResponse.businesses.map((business)=>({
                id: business.id,
                name: business.name,
                code: business.code,
                businessTypeId: business.business_type_id,
                businessType: {
                    id: business.business_type.id,
                    name: business.business_type.name,
                    code: business.business_type.code,
                    description: business.business_type.description,
                    icon: business.business_type.icon
                },
                timezone: business.timezone,
                address: business.address,
                description: business.description,
                logoURL: business.logo_url,
                primaryColor: business.primary_color,
                secondaryColor: business.secondary_color,
                tertiaryColor: business.tertiary_color,
                quaternaryColor: business.quaternary_color,
                navbarImageURL: business.navbar_image_url,
                customDomain: business.custom_domain,
                isActive: business.is_active,
                enableDelivery: business.enable_delivery,
                enablePickup: business.enable_pickup,
                enableReservations: business.enable_reservations // ‚Üê snake_case ‚Üí camelCase
            }))
    };
}
}),
"[project]/src/services/auth/infrastructure/actions/mappers/roles-permissions.mapper.ts [app-ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

/**
 * Mapper para roles y permisos
 * Convierte del backend (snake_case) al dominio (camelCase)
 * 
 * RESUELVE EL PROBLEMA REAL:
 * - resource_name ‚Üí resourceName
 * - is_super ‚Üí isSuper
 */ __turbopack_context__.s({
    "mapRolesPermissionsResponseToDomain": ()=>mapRolesPermissionsResponseToDomain
});
function mapRolesPermissionsResponseToDomain(backendResponse) {
    return {
        isSuper: backendResponse.is_super,
        roles: backendResponse.roles.map((role)=>({
                id: role.id,
                name: role.name,
                code: role.code,
                description: role.description,
                level: role.level,
                scope: role.scope
            })),
        resources: backendResponse.resources.map((resource)=>({
                resource: resource.resource,
                resourceName: resource.resource_name,
                actions: resource.actions.map((action)=>({
                        id: action.id,
                        name: action.name,
                        code: action.code,
                        description: action.description,
                        resource: action.resource,
                        action: action.action,
                        scope: action.scope
                    }))
            }))
    };
}
}),
"[project]/src/services/auth/infrastructure/actions/mappers/auth.mapper.ts [app-ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

/**
 * Mappers para entidades de autenticaci√≥n
 * Convierte entre diferentes formatos de datos de autenticaci√≥n
 */ __turbopack_context__.s({
    "mapFormDataToLoginCredentials": ()=>mapFormDataToLoginCredentials,
    "mapFormDataToLoginRequest": ()=>mapFormDataToLoginRequest,
    "mapLoginCredentialsToLoginRequest": ()=>mapLoginCredentialsToLoginRequest,
    "mapLoginRequestToLoginCredentials": ()=>mapLoginRequestToLoginCredentials
});
function mapLoginRequestToLoginCredentials(loginRequest) {
    return {
        email: loginRequest.email,
        password: loginRequest.password
    };
}
function mapLoginCredentialsToLoginRequest(loginCredentials) {
    return {
        email: loginCredentials.email,
        password: loginCredentials.password
    };
}
function mapFormDataToLoginCredentials(formData) {
    return {
        email: formData.get('email'),
        password: formData.get('password')
    };
}
function mapFormDataToLoginRequest(formData) {
    return {
        email: formData.get('email'),
        password: formData.get('password')
    };
}
}),
"[project]/src/services/auth/infrastructure/actions/mappers/index.ts [app-ssr] (ecmascript) <locals>": ((__turbopack_context__) => {
"use strict";

/**
 * Exportaciones de todos los mappers de autenticaci√≥n
 */ // Mapper para la respuesta del login (usuario, token, businesses)
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$auth$2f$infrastructure$2f$actions$2f$mappers$2f$login$2d$response$2e$mapper$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/services/auth/infrastructure/actions/mappers/login-response.mapper.ts [app-ssr] (ecmascript)");
// Mapper para roles y permisos
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$auth$2f$infrastructure$2f$actions$2f$mappers$2f$roles$2d$permissions$2e$mapper$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/services/auth/infrastructure/actions/mappers/roles-permissions.mapper.ts [app-ssr] (ecmascript)");
// Mappers para credenciales de login
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$auth$2f$infrastructure$2f$actions$2f$mappers$2f$auth$2e$mapper$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/services/auth/infrastructure/actions/mappers/auth.mapper.ts [app-ssr] (ecmascript)");
;
;
;
}),
"[project]/src/services/auth/infrastructure/actions/mappers/index.ts [app-ssr] (ecmascript) <module evaluation>": ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$auth$2f$infrastructure$2f$actions$2f$mappers$2f$login$2d$response$2e$mapper$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/services/auth/infrastructure/actions/mappers/login-response.mapper.ts [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$auth$2f$infrastructure$2f$actions$2f$mappers$2f$roles$2d$permissions$2e$mapper$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/services/auth/infrastructure/actions/mappers/roles-permissions.mapper.ts [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$auth$2f$infrastructure$2f$actions$2f$mappers$2f$auth$2e$mapper$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/services/auth/infrastructure/actions/mappers/auth.mapper.ts [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$auth$2f$infrastructure$2f$actions$2f$mappers$2f$index$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/src/services/auth/infrastructure/actions/mappers/index.ts [app-ssr] (ecmascript) <locals>");
}),
"[project]/src/shared/hooks/useDebugAuth.ts [app-ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s({
    "useDebugAuth": ()=>useDebugAuth
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js [app-ssr] (ecmascript)");
'use client';
;
const useDebugAuth = (hookName)=>{
    const callCount = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useRef"])(0);
    const lastCall = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useRef"])(new Date());
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        callCount.current += 1;
        const now = new Date();
        const timeDiff = now.getTime() - lastCall.current.getTime();
        console.log(`üîç [${hookName}] Llamada #${callCount.current} - Tiempo desde √∫ltima: ${timeDiff}ms`);
        if (callCount.current > 5) {
            console.warn(`‚ö†Ô∏è [${hookName}] Muchas llamadas detectadas: ${callCount.current}`);
        }
        lastCall.current = now;
    });
    return {
        callCount: callCount.current
    };
};
}),
"[project]/src/shared/hooks/useServerAuth.ts [app-ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s({
    "useServerAuth": ()=>useServerAuth
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$auth$2f$infrastructure$2f$actions$2f$index$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/src/services/auth/infrastructure/actions/index.ts [app-ssr] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$auth$2f$infrastructure$2f$actions$2f$data$3a$36f315__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__ = __turbopack_context__.i("[project]/src/services/auth/infrastructure/actions/data:36f315 [app-ssr] (ecmascript) <text/javascript>");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$auth$2f$infrastructure$2f$actions$2f$data$3a$767e26__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__ = __turbopack_context__.i("[project]/src/services/auth/infrastructure/actions/data:767e26 [app-ssr] (ecmascript) <text/javascript>");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$auth$2f$infrastructure$2f$actions$2f$data$3a$e50e78__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__ = __turbopack_context__.i("[project]/src/services/auth/infrastructure/actions/data:e50e78 [app-ssr] (ecmascript) <text/javascript>");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$auth$2f$infrastructure$2f$actions$2f$data$3a$6e3792__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__ = __turbopack_context__.i("[project]/src/services/auth/infrastructure/actions/data:6e3792 [app-ssr] (ecmascript) <text/javascript>");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$auth$2f$infrastructure$2f$actions$2f$data$3a$00c0f4__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__ = __turbopack_context__.i("[project]/src/services/auth/infrastructure/actions/data:00c0f4 [app-ssr] (ecmascript) <text/javascript>");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$auth$2f$infrastructure$2f$actions$2f$mappers$2f$index$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/src/services/auth/infrastructure/actions/mappers/index.ts [app-ssr] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$auth$2f$infrastructure$2f$actions$2f$mappers$2f$auth$2e$mapper$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/services/auth/infrastructure/actions/mappers/auth.mapper.ts [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$shared$2f$hooks$2f$useDebugAuth$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/shared/hooks/useDebugAuth.ts [app-ssr] (ecmascript)");
'use client';
;
;
;
;
const useServerAuth = ()=>{
    // Hook de debug para monitorear llamadas
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$shared$2f$hooks$2f$useDebugAuth$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useDebugAuth"])('useServerAuth');
    const [state, setState] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])({
        isAuthenticated: false,
        user: null,
        permissions: null,
        loading: true,
        error: null
    });
    // Refs para evitar m√∫ltiples llamadas simult√°neas
    const authCheckRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useRef"])(false);
    const permissionsCheckRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useRef"])(false);
    const initializedRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useRef"])(false);
    // Verificar autenticaci√≥n usando Server Action
    const checkAuth = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])(async ()=>{
        if (authCheckRef.current) {
            console.log('üîÑ [useServerAuth] checkAuth ya se est√° ejecutando, saltando...');
            return {
                isAuthenticated: state.isAuthenticated,
                user: state.user
            };
        }
        console.log('üîç [useServerAuth] Verificando autenticaci√≥n...');
        authCheckRef.current = true;
        try {
            setState((prev)=>({
                    ...prev,
                    loading: true
                }));
            const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$auth$2f$infrastructure$2f$actions$2f$data$3a$e50e78__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__["checkAuthAction"])();
            console.log('‚úÖ [useServerAuth] Verificaci√≥n completada:', result);
            if (result.isAuthenticated) {
                setState((prev)=>({
                        ...prev,
                        isAuthenticated: true,
                        user: result.user || prev.user,
                        loading: false
                    }));
            } else {
                setState((prev)=>({
                        ...prev,
                        isAuthenticated: false,
                        user: null,
                        loading: false
                    }));
            }
            return result;
        } catch (error) {
            console.error('‚ùå [useServerAuth] Error verificando autenticaci√≥n:', error);
            setState((prev)=>({
                    ...prev,
                    isAuthenticated: false,
                    user: null,
                    loading: false
                }));
            return {
                isAuthenticated: false,
                user: null
            };
        } finally{
            authCheckRef.current = false;
        }
    }, []);
    // Obtener roles y permisos usando Server Action
    const loadUserRolesPermissions = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])(async ()=>{
        if (permissionsCheckRef.current) {
            console.log('üîÑ [useServerAuth] loadUserRolesPermissions ya se est√° ejecutando, saltando...');
            return state.permissions;
        }
        console.log('üîç [useServerAuth] Iniciando loadUserRolesPermissions...');
        console.log('üîç [useServerAuth] Estado actual:', {
            isAuthenticated: state.isAuthenticated,
            permissionsCheckRef: permissionsCheckRef.current,
            loading: state.loading,
            hasUser: !!state.user
        });
        if (!state.isAuthenticated) {
            console.log('üîç [useServerAuth] Usuario no autenticado, saltando carga de permisos');
            return null;
        }
        if (!state.user) {
            console.log('üîç [useServerAuth] No hay usuario en el estado, saltando carga de permisos');
            return null;
        }
        permissionsCheckRef.current = true;
        setState((prev)=>({
                ...prev,
                loading: true
            }));
        try {
            console.log('üîç [useServerAuth] Llamando a getUserRolesPermissionsAction...');
            const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$auth$2f$infrastructure$2f$actions$2f$data$3a$6e3792__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__["getUserRolesPermissionsAction"])();
            console.log('üîç [useServerAuth] Resultado recibido:', result);
            if (result.success && result.data) {
                console.log('‚úÖ [useServerAuth] Permisos cargados exitosamente');
                console.log('üìä [useServerAuth] Estructura de permisos:', {
                    hasResources: !!(result.data.resources && result.data.resources.length > 0),
                    hasPermissions: !!(result.data.permissions && result.data.permissions.length > 0),
                    hasRoles: !!(result.data.roles && result.data.roles.length > 0),
                    resourcesCount: result.data.resources?.length || 0,
                    permissionsCount: result.data.permissions?.length || 0,
                    rolesCount: result.data.roles?.length || 0
                });
                // Agregar logging detallado de los datos recibidos
                console.log('üîç [useServerAuth] Datos completos recibidos:', JSON.stringify(result.data, null, 2));
                setState((prev)=>({
                        ...prev,
                        permissions: result.data,
                        loading: false,
                        error: null
                    }));
                return result.data;
            } else {
                console.log('‚ùå [useServerAuth] Error al cargar permisos:', result.message);
                setState((prev)=>({
                        ...prev,
                        loading: false,
                        error: result.message || 'Error al cargar permisos'
                    }));
                return null;
            }
        } catch (error) {
            console.error('‚ùå [useServerAuth] Error en loadUserRolesPermissions:', error);
            const errorMessage = error instanceof Error ? error.message : 'Error interno';
            setState((prev)=>({
                    ...prev,
                    loading: false,
                    error: errorMessage
                }));
            return null;
        } finally{
            permissionsCheckRef.current = false;
        }
    }, [
        state.isAuthenticated,
        state.user
    ]);
    // Login usando Server Action
    const login = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])(async (formData)=>{
        if (state.loading) return {
            success: false,
            message: 'Ya hay una operaci√≥n en curso'
        };
        console.log('üîê [useServerAuth] Login iniciado...');
        setState((prev)=>({
                ...prev,
                loading: true,
                error: null
            }));
        try {
            const loginRequest = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$auth$2f$infrastructure$2f$actions$2f$mappers$2f$auth$2e$mapper$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["mapFormDataToLoginCredentials"])(formData);
            const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$auth$2f$infrastructure$2f$actions$2f$data$3a$36f315__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__["loginAction"])(loginRequest);
            console.log('üîê [useServerAuth] Resultado del login:', result);
            if (result.success) {
                setState((prev)=>({
                        ...prev,
                        isAuthenticated: true,
                        user: result.data?.user,
                        loading: false,
                        error: null
                    }));
                console.log('‚úÖ [useServerAuth] Login exitoso, estado actualizado');
                console.log('üîç [useServerAuth] Esperando que las cookies est√©n disponibles...');
                // Esperar un poco m√°s para asegurar que las cookies est√©n disponibles
                await new Promise((resolve)=>setTimeout(resolve, 500));
                console.log('üîç [useServerAuth] Intentando cargar permisos...');
                // Cargar permisos despu√©s del login exitoso
                try {
                    const permissionsResult = await loadUserRolesPermissions();
                    console.log('‚úÖ [useServerAuth] Permisos cargados despu√©s del login:', permissionsResult);
                } catch (permissionsError) {
                    console.error('‚ùå [useServerAuth] Error cargando permisos despu√©s del login:', permissionsError);
                }
                return result;
            } else {
                console.log('‚ùå [useServerAuth] Login fall√≥:', result.message);
                setState((prev)=>({
                        ...prev,
                        loading: false,
                        error: result.message || 'Error de autenticaci√≥n'
                    }));
                return result;
            }
        } catch (error) {
            console.error('üí• [useServerAuth] Error en login:', error);
            const errorMessage = error instanceof Error ? error.message : 'Error interno';
            setState((prev)=>({
                    ...prev,
                    loading: false,
                    error: errorMessage
                }));
            throw error;
        }
    }, [
        state.loading,
        loadUserRolesPermissions
    ]);
    // Logout usando Server Action
    const logout = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])(async ()=>{
        if (state.loading) return {
            success: false,
            message: 'Ya hay una operaci√≥n en curso'
        };
        setState((prev)=>({
                ...prev,
                loading: true
            }));
        try {
            const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$auth$2f$infrastructure$2f$actions$2f$data$3a$767e26__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__["logoutAction"])();
            setState({
                isAuthenticated: false,
                user: null,
                permissions: null,
                loading: false,
                error: null
            });
            authCheckRef.current = false;
            permissionsCheckRef.current = false;
            initializedRef.current = false;
            return result;
        } catch (error) {
            setState((prev)=>({
                    ...prev,
                    loading: false
                }));
            throw error;
        }
    }, [
        state.loading
    ]);
    // Cambiar contrase√±a usando Server Action
    const changePassword = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])(async (formData)=>{
        if (state.loading) return {
            success: false,
            message: 'Ya hay una operaci√≥n en curso'
        };
        setState((prev)=>({
                ...prev,
                loading: true,
                error: null
            }));
        try {
            const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$auth$2f$infrastructure$2f$actions$2f$data$3a$00c0f4__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__["changePasswordAction"])(formData);
            setState((prev)=>({
                    ...prev,
                    loading: false
                }));
            if (!result.success) {
                setState((prev)=>({
                        ...prev,
                        error: result.message || 'Error al cambiar contrase√±a'
                    }));
            }
            return result;
        } catch (error) {
            const errorMessage = error instanceof Error ? error.message : 'Error interno';
            setState((prev)=>({
                    ...prev,
                    loading: false,
                    error: errorMessage
                }));
            throw error;
        }
    }, [
        state.loading
    ]);
    // Limpiar error
    const clearError = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])(()=>{
        setState((prev)=>({
                ...prev,
                error: null
            }));
    }, []);
    // Forzar recarga de permisos (√∫til para debugging)
    const forceReloadPermissions = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])(async ()=>{
        console.log('üîÑ [useServerAuth] Forzando recarga de permisos...');
        permissionsCheckRef.current = false;
        initializedRef.current = false;
        try {
            const result = await loadUserRolesPermissions();
            console.log('‚úÖ [useServerAuth] Permisos recargados forzadamente:', result);
            return result;
        } catch (error) {
            console.error('‚ùå [useServerAuth] Error en recarga forzada de permisos:', error);
            return null;
        }
    }, [
        loadUserRolesPermissions
    ]);
    // Verificar si tiene un permiso espec√≠fico
    const hasPermission = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])((permissionCode)=>{
        if (!state.permissions) return false;
        if (state.permissions.resources) {
            for (const resource of state.permissions.resources){
                if (resource.actions && Array.isArray(resource.actions)) {
                    const hasAction = resource.actions.some((action)=>action.code === permissionCode);
                    if (hasAction) return true;
                }
            }
        }
        if (state.permissions.permissions) {
            return state.permissions.permissions.some((permission)=>permission.code === permissionCode);
        }
        return false;
    }, [
        state.permissions
    ]);
    // Verificar si tiene un rol espec√≠fico
    const hasRole = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])((roleName)=>{
        if (!state.permissions || !state.permissions.roles) return false;
        return state.permissions.roles.some((role)=>role.name === roleName);
    }, [
        state.permissions
    ]);
    // Verificar si es super admin
    const isSuperAdmin = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])(()=>{
        return hasRole('super_admin') || hasRole('admin');
    }, [
        hasRole
    ]);
    // Inicializar autenticaci√≥n
    const initializeAuth = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])(async ()=>{
        if (initializedRef.current) {
            console.log('üîÑ [useServerAuth] Ya inicializado, saltando...');
            return;
        }
        console.log('üöÄ [useServerAuth] Iniciando initializeAuth...');
        initializedRef.current = true;
        try {
            console.log('üîç [useServerAuth] Llamando a checkAuth...');
            const authResult = await checkAuth();
            console.log('‚úÖ [useServerAuth] checkAuth completado:', authResult);
            if (authResult.isAuthenticated && authResult.user) {
                console.log('üîç [useServerAuth] Usuario autenticado, cargando permisos...');
                console.log('üë§ [useServerAuth] Usuario completo:', authResult.user.email);
                console.log('üè¢ [useServerAuth] Informaci√≥n del negocio disponible:', {
                    hasBusinesses: !!(authResult.user.businesses && authResult.user.businesses.length > 0),
                    businessCount: authResult.user.businesses?.length || 0,
                    hasPrimaryColor: !!authResult.user.businesses?.[0]?.primary_color,
                    hasNavbarImage: !!authResult.user.businesses?.[0]?.navbar_image_url
                });
                try {
                    // Cargar permisos despu√©s de verificar autenticaci√≥n
                    const permissionsResult = await loadUserRolesPermissions();
                    console.log('‚úÖ [useServerAuth] Permisos cargados en initializeAuth:', permissionsResult);
                } catch (error) {
                    console.error('‚ùå [useServerAuth] Error cargando permisos en initializeAuth:', error);
                }
            } else {
                console.log('üîç [useServerAuth] Usuario no autenticado o sin datos, saltando carga de permisos');
            }
        } catch (error) {
            console.error('‚ùå [useServerAuth] Error en initializeAuth:', error);
        }
    }, [
        checkAuth,
        loadUserRolesPermissions
    ]);
    // Memoizar valores derivados
    const memoizedState = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useMemo"])(()=>({
            ...state,
            hasPermission,
            hasRole,
            isSuperAdmin
        }), [
        state,
        hasPermission,
        hasRole,
        isSuperAdmin
    ]);
    // Ejecutar initializeAuth solo una vez al montar
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        console.log('üöÄ [useServerAuth] Hook montado, ejecutando initializeAuth...');
        initializeAuth();
    }, []); // Remover dependencias para evitar recreaci√≥n
    // Cargar permisos autom√°ticamente cuando el usuario cambie
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        console.log('üîÑ [useServerAuth] useEffect - Usuario cambi√≥:', {
            isAuthenticated: state.isAuthenticated,
            hasUser: !!state.user,
            hasPermissions: !!state.permissions,
            permissionsCount: state.permissions ? 'presente' : 'ausente'
        });
        if (state.isAuthenticated && state.user && !state.permissions) {
            console.log('üîÑ [useServerAuth] Usuario autenticado sin permisos, cargando...');
            loadUserRolesPermissions();
        }
    }, [
        state.isAuthenticated,
        state.user,
        state.permissions
    ]);
    return {
        ...memoizedState,
        login,
        logout,
        checkAuth,
        loadUserRolesPermissions,
        changePassword,
        clearError,
        initializeAuth,
        hasPermission,
        hasRole,
        isSuperAdmin,
        forceReloadPermissions
    };
};
}),
"[project]/src/shared/contexts/AppContext.tsx [app-ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s({
    "AppProvider": ()=>AppProvider,
    "default": ()=>__TURBOPACK__default__export__,
    "useAppContext": ()=>useAppContext
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$shared$2f$hooks$2f$useServerAuth$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/shared/hooks/useServerAuth.ts [app-ssr] (ecmascript)");
'use client';
;
;
;
const AppContext = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["createContext"])(undefined);
const AppProvider = ({ children })=>{
    const [user, setUser] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    const [permissions, setPermissions] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])([]);
    const [isLoading, setIsLoading] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(true);
    const [isInitialized, setIsInitialized] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(false);
    // Flag para evitar m√∫ltiples inicializaciones
    const initializationRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useRef"])(false);
    // Usar el nuevo hook de Server Actions
    const { isAuthenticated, user: authUser, permissions: authPermissions, loading: authLoading, error: authError, initializeAuth, hasPermission: serverHasPermission, isSuperAdmin: serverIsSuperAdmin } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$shared$2f$hooks$2f$useServerAuth$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useServerAuth"])();
    // Funci√≥n para aplicar tema del negocio
    const applyBusinessTheme = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])((user)=>{
        if (!user || !user.businesses || user.businesses.length === 0) return;
        const business = user.businesses[0]; // Usar any temporalmente para evitar errores de tipo
        if (typeof document !== 'undefined') {
            const root = document.documentElement;
            if (business.primary_color) {
                root.style.setProperty('--primary-color', business.primary_color);
            }
            if (business.secondary_color) {
                root.style.setProperty('--secondary-color', business.secondary_color);
            }
            if (business.tertiary_color) {
                root.style.setProperty('--tertiary-color', business.tertiary_color);
            }
            if (business.quaternary_color) {
                root.style.setProperty('--quaternary-color', business.quaternary_color);
            }
            if (business.navbar_image_url) {
                root.style.setProperty('--navbar-image', `url(${business.navbar_image_url})`);
            }
        }
    }, []);
    // Asegurar que el tema quede aplicado incluso si otros efectos lo pisan
    const ensureThemeApplied = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])((user)=>{
        if (typeof document === 'undefined') return;
        if (!user || !user.businesses || user.businesses.length === 0) return;
        const business = user.businesses[0]; // Usar any temporalmente para evitar errores de tipo
        const root = document.documentElement;
        const currentPrimary = getComputedStyle(root).getPropertyValue('--primary-color').trim();
        const currentSecondary = getComputedStyle(root).getPropertyValue('--secondary-color').trim();
        const currentTertiary = getComputedStyle(root).getPropertyValue('--tertiary-color').trim();
        const currentQuaternary = getComputedStyle(root).getPropertyValue('--quaternary-color').trim();
        const currentNavbarImage = getComputedStyle(root).getPropertyValue('--navbar-image').trim();
        const targetPrimary = business.primary_color || '';
        const targetSecondary = business.secondary_color || '';
        const targetTertiary = business.tertiary_color || '';
        const targetQuaternary = business.quaternary_color || '';
        const targetNavbarImage = business.navbar_image_url ? `url(${business.navbar_image_url})` : '';
        // Si no coincide con el negocio, reestablecer
        if (targetPrimary && currentPrimary !== targetPrimary) {
            root.style.setProperty('--primary-color', targetPrimary);
        }
        if (targetSecondary && currentSecondary !== targetSecondary) {
            root.style.setProperty('--secondary-color', targetSecondary);
        }
        if (targetTertiary && currentTertiary !== targetTertiary) {
            root.style.setProperty('--tertiary-color', targetTertiary);
        }
        if (targetQuaternary && currentQuaternary !== targetQuaternary) {
            root.style.setProperty('--quaternary-color', targetQuaternary);
        }
        if (targetNavbarImage && currentNavbarImage !== targetNavbarImage) {
            root.style.setProperty('--navbar-image', targetNavbarImage);
        }
    }, []);
    // Funci√≥n para inicializar la aplicaci√≥n (se ejecuta UNA SOLA VEZ)
    const initializeApp = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])(async ()=>{
        if (initializationRef.current) {
            console.log('üîÑ AppContext: Ya est√° inicializado, saltando...');
            return;
        }
        // Protecci√≥n adicional contra re-inicializaci√≥n
        if (isLoading) {
            console.log('üîÑ AppContext: Ya est√° cargando, saltando...');
            return;
        }
        console.log('üöÄ AppContext: Inicializando aplicaci√≥n...');
        console.log('üîç AppContext: Estado actual:', {
            isAuthenticated,
            authUser: !!authUser,
            authPermissions: !!authPermissions,
            authLoading,
            authError
        });
        setIsLoading(true);
        try {
            // 1. Inicializar autenticaci√≥n usando Server Actions
            console.log('üîç AppContext: Llamando a initializeAuth...');
            await initializeAuth();
            console.log('‚úÖ AppContext: initializeAuth completado');
            // 2. Usar informaci√≥n del usuario del hook de autenticaci√≥n
            if (authUser) {
                console.log('‚úÖ AppContext: Usuario autenticado encontrado');
                setUser(authUser);
                applyBusinessTheme(authUser);
            }
            // 3. Procesar permisos del hook de autenticaci√≥n
            if (authPermissions) {
                console.log('üîç AppContext: Procesando permisos...');
                let userPermissions = [];
                // Procesar la estructura correcta del backend: resources.actions
                if (authPermissions.resources && Array.isArray(authPermissions.resources)) {
                    authPermissions.resources.forEach((resource)=>{
                        if (resource.actions && Array.isArray(resource.actions)) {
                            resource.actions.forEach((action)=>{
                                if (action.code) {
                                    userPermissions.push(action.code);
                                }
                            });
                        }
                    });
                }
                // Tambi√©n agregar permisos directos si existen
                if (authPermissions.permissions && Array.isArray(authPermissions.permissions)) {
                    authPermissions.permissions.forEach((permission)=>{
                        if (permission.code) {
                            userPermissions.push(permission.code);
                        }
                    });
                }
                setPermissions(userPermissions);
                console.log('‚úÖ AppContext: Permisos cargados desde Server Actions:', userPermissions);
            }
            setIsInitialized(true);
            initializationRef.current = true; // Marcar como inicializado
            console.log('‚úÖ AppContext: Aplicaci√≥n inicializada correctamente');
        } catch (error) {
            console.error('‚ùå AppContext: Error durante la inicializaci√≥n:', error);
            if (authError) {
                console.error('‚ùå AppContext: Error de autenticaci√≥n:', authError);
            }
        } finally{
            setIsLoading(false);
        }
    }, [
        isLoading,
        initializeAuth,
        applyBusinessTheme,
        isAuthenticated,
        authUser,
        authPermissions,
        authLoading,
        authError
    ]);
    // Inicializar aplicaci√≥n cuando el hook de autenticaci√≥n est√© listo
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        // Solo inicializar UNA SOLA VEZ cuando no est√© inicializado
        if (!initializationRef.current && !authLoading && !authError) {
            console.log('üîç AppContext: Condiciones cumplidas, iniciando...');
            initializeApp();
        } else {
            console.log('üîç AppContext: Saltando inicializaci√≥n:', {
                isInitialized: initializationRef.current,
                authLoading,
                authError: !!authError
            });
        }
    }, [
        initializationRef.current,
        authLoading,
        authError,
        initializeApp
    ]);
    // Sincronizar loading del hook de autenticaci√≥n (SIMPLIFICADO)
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (authLoading && !isLoading) {
            setIsLoading(true);
        } else if (!authLoading && isLoading && !initializationRef.current) {
            setIsLoading(false);
        }
    }, [
        authLoading,
        isLoading,
        initializationRef.current
    ]);
    // Sincronizar estado del hook de autenticaci√≥n (UNA SOLA VEZ)
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        console.log('üîÑ [AppContext] useEffect - Sincronizando usuario:', {
            authUser: !!authUser,
            user: !!user,
            shouldUpdate: authUser && !user
        });
        if (authUser && !user) {
            console.log('‚úÖ [AppContext] Actualizando usuario del contexto');
            setUser(authUser);
            applyBusinessTheme(authUser);
        }
    }, [
        authUser,
        user,
        applyBusinessTheme
    ]);
    // Sincronizar permisos del hook de autenticaci√≥n (UNA SOLA VEZ)
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        console.log('üîÑ [AppContext] useEffect - Sincronizando permisos:', {
            authPermissions: !!authPermissions,
            permissions: permissions.length,
            shouldUpdate: authPermissions && permissions.length === 0
        });
        if (authPermissions) {
            console.log('‚úÖ [AppContext] Actualizando permisos del contexto');
            console.log('üìä [AppContext] Estructura de authPermissions:', {
                hasResources: !!(authPermissions.resources && authPermissions.resources.length > 0),
                hasPermissions: !!(authPermissions.permissions && authPermissions.permissions.length > 0),
                hasRoles: !!(authPermissions.roles && authPermissions.roles.length > 0),
                resourcesCount: authPermissions.resources?.length || 0,
                permissionsCount: authPermissions.permissions?.length || 0,
                rolesCount: authPermissions.roles?.length || 0
            });
            // Agregar logging detallado de authPermissions
            console.log('üîç [AppContext] authPermissions completo:', JSON.stringify(authPermissions, null, 2));
            let userPermissions = [];
            // Procesar la estructura correcta del backend: resources.actions
            if (authPermissions.resources && Array.isArray(authPermissions.resources)) {
                console.log('üîç [AppContext] Procesando resources.actions...');
                authPermissions.resources.forEach((resource)=>{
                    if (resource.actions && Array.isArray(resource.actions)) {
                        resource.actions.forEach((action)=>{
                            if (action.code) {
                                userPermissions.push(action.code);
                                console.log('‚úÖ [AppContext] Permiso agregado:', action.code);
                            }
                        });
                    }
                });
            }
            // Tambi√©n agregar permisos directos si existen
            if (authPermissions.permissions && Array.isArray(authPermissions.permissions)) {
                console.log('üîç [AppContext] Procesando permissions directos...');
                authPermissions.permissions.forEach((permission)=>{
                    if (permission.code) {
                        userPermissions.push(permission.code);
                        console.log('‚úÖ [AppContext] Permiso directo agregado:', permission.code);
                    }
                });
            }
            setPermissions(userPermissions);
            console.log('‚úÖ [AppContext] Permisos sincronizados desde Server Actions:', userPermissions);
        } else {
            console.log('‚ùå [AppContext] No hay authPermissions disponibles');
        }
    }, [
        authPermissions
    ]);
    // Funci√≥n para actualizar usuario
    const updateUser = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])((userData)=>{
        setUser((prev)=>{
            if (!prev) return prev;
            const updatedUser = {
                ...prev,
                ...userData
            };
            applyBusinessTheme(updatedUser);
            return updatedUser;
        });
    }, [
        applyBusinessTheme
    ]);
    // Funci√≥n para limpiar aplicaci√≥n
    const clearApp = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])(()=>{
        setUser(null);
        setPermissions([]);
        setIsInitialized(false);
        setIsLoading(false);
        initializationRef.current = false; // Resetear el flag
    }, []);
    // Funci√≥n para verificar permisos (usar Server Actions)
    const hasPermission = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])((permission)=>{
        return serverHasPermission(permission);
    }, [
        serverHasPermission
    ]);
    // Funci√≥n para verificar si es super admin (usar Server Actions)
    const isSuperAdmin = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useCallback"])(()=>{
        return serverIsSuperAdmin();
    }, [
        serverIsSuperAdmin
    ]);
    // Memoizar contexto para evitar re-renderizados innecesarios
    const contextValue = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useMemo"])(()=>({
            user,
            permissions,
            isLoading,
            isInitialized,
            initializeApp,
            updateUser,
            clearApp,
            hasPermission,
            isSuperAdmin
        }), [
        user,
        permissions,
        isLoading,
        isInitialized,
        initializeApp,
        updateUser,
        clearApp,
        hasPermission,
        isSuperAdmin
    ]);
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(AppContext.Provider, {
        value: contextValue,
        children: children
    }, void 0, false, {
        fileName: "[project]/src/shared/contexts/AppContext.tsx",
        lineNumber: 343,
        columnNumber: 5
    }, ("TURBOPACK compile-time value", void 0));
};
const useAppContext = ()=>{
    const context = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useContext"])(AppContext);
    if (context === undefined) {
        throw new Error('useAppContext debe ser usado dentro de AppProvider');
    }
    return context;
};
const __TURBOPACK__default__export__ = AppContext;
}),

};

//# sourceMappingURL=%5Broot-of-the-server%5D__fda2a4bf._.js.map